<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, user-scalable=no">
    <meta name="language" content="en">
<link rel="alternate" hreflang="en" href="https://datamb.football/plotteam"/>
<link rel="alternate" hreflang="x-default" href="https://datamb.football/plotteam"/>
    <link rel="shortcut icon" type="image/x-icon" href="https://datamb.football/favicon.ico">
    <meta name="description" data-i18n="meta.description" content="Plot Top 7 League team statistics. Visualize team performance and analyze multiple metrics such as Goals, Goals conceded, xG, Shots on target, Pressing, Defensive duels, Pass completion and more for teams in Premier League, La Liga, Bundesliga, Serie A, Ligue 1, Eredivisie, Primeira Liga.">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@DataMB_">
    <meta name="twitter:title" content="DataMB | Plot Teams">
    <meta name="twitter:description" content="Generate scatter plots for Top 7 League teams">
    <meta name="twitter:image" content="https://datamb.football/vignettes/teamplots.png">
    <meta property="og:image" content="https://datamb.football/vignettes/teamplots.png">
    <title data-i18n="meta.title">DataMB | Plot Teams</title>
    <script>
        (function() {
            var width = window.innerWidth;
            var viewportMeta = document.querySelector('meta[name="viewport"]');
            if (viewportMeta) {
      if (width < 645) {
                
            var initialScale = width / 645;
      viewportMeta.setAttribute('content', 'width=device-width, initial-scale=' + initialScale + ', user-scalable=no');
      } else {
                  var fixedScale = 1;
          viewportMeta.setAttribute('content', 'width=device-width, initial-scale=' + fixedScale + ', user-scalable=no');
      
        }
          } 
      })();
      </script>
    <script src="https://d3js.org/d3.v5.min.js"></script>
    <link rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
    <script src="https://code.iconify.design/iconify-icon/1.0.7/iconify-icon.min.js"></script>
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --primary-color: #3498db;
            --secondary-color: #2ecc71;
            --background-color: #f5f7fa;
            --container-bg: #ffffff;
            --text-color: #333333;
            --border-color: #e0e0e0;
            --hover-color: #f0f0f0;
            --button-color: #3498db;
            --button-text: #ffffff;
            --header-bg: #ffffff;
            --shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        }

        .dark-mode {
            --primary-color: #3498db;
            --secondary-color: #2ecc71;
            --background-color: #0e0f0f;
            --container-bg: #1a1a1a;
            --text-color: #e0e0e0;
            --border-color: #333333;
            --hover-color: #252525;
            --button-color: #2980b9;
            --button-text: #ffffff;
            --header-bg: #0e0f0f;
            --shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--background-color);
            color: var(--text-color);
            line-height: 1.6;
            transition: background-color 0.3s, color 0.3s;
        }

        .header {
            background-color: var(--header-bg);
            display: flex;
            padding: 20px;
            align-items: center;
            justify-content: space-between;
            box-shadow: var(--shadow);
            position: relative;
            font-family: system-ui;
            top: 0;
            z-index: 100;
        }


        .container {
            max-width: 1200px;
            margin: 30px auto;
            padding: 0 20px;
            box-sizing: border-box;
        }

        /* Replace plot-container with a simpler structure */
        .chart-wrapper {
            background-color: var(--container-bg);
            border-radius: 10px;
            box-shadow: var(--shadow);
            padding: 30px;
            margin-bottom: 30px;
            position: relative;
            width: 100%;
        }

        .legend {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 15px;
            margin-top: 20px;
            padding: 10px;
            border-top: 1px solid var(--border-color);
            width: 100%;
        }

        .legend-item {
            display: flex;
            align-items: center;
            font-size: 12px;
        }

        .legend-color {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 5px;
            border: 1px solid rgba(0, 0, 0, 0.2);
        }

        .controls {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
            margin-bottom: 20px;
            justify-content: center;
            align-items: center;
        }

        select, input {
            padding: 8px 12px;
            border: 1px solid var(--border-color);
            border-radius: 6px;
            background-color: var(--container-bg);
            color: var(--text-color);
            font-family: 'Inter', sans-serif;
            font-size: 14px;
            transition: border-color 0.2s;
            height: 36px;
            box-sizing: border-box;
        }

        select:focus, input:focus {
            outline: none;
            border-color: var(--primary-color);
        }

        /* Ensure consistent height for controls in the same row */
        select, input, .btn:not(.btn-icon), .custom-select-trigger, .metric-select-trigger {
            height: 36px;
            box-sizing: border-box;
        }

        .btn {
            padding: 8px 16px;
            border: none;
            border-radius: 6px;
            background-color: var(--button-color);
            color: var(--button-text);
            font-family: 'Inter', sans-serif;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: background-color 0.2s;
            height: 36px;
            box-sizing: border-box;
        }

        .btn:hover {
            background-color: #2980b9;
        }

        .btn-outline {
            background-color: transparent;
            border: 1px solid var(--border-color);
            color: var(--text-color);
        }

        .btn-outline:hover {
            background-color: var(--hover-color);
        }

        .btn-icon {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 36px;
            height: 36px;
            padding: 0;
            border-radius: 6px;
        }

        #search-bar, #select-league {
            width: 178px;
        }

        #select-x, #select-y {
            width: 190px;
        }

        /* Add tooltip for icon buttons */
        .btn-icon .icon {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 100%;
            height: 100%;
        }

        .btn-icon i {
            font-size: 18px;
        }

        .position-filters {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 20px;
        }

        .position-btn {
            padding: 8px 16px;
            border: none;
            border-radius: 6px;
            background-color: var(--container-bg);
            color: var(--text-color);
            font-family: 'Inter', sans-serif;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: background-color 0.2s, color 0.2s;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        .position-btn:hover, .position-btn.active {
            background-color: var(--primary-color);
            color: white;
        }

        .chart-container {
            width: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
            margin-top: 30px; /* Consistent spacing from controls */
        }

        #scatter-plot {
            width: 100%;
            height: auto; /* Height will be set dynamically */
            display: block;
            margin: 0 auto;
            max-width: 1082px;
        }
        
        .watermark-logo {
            position: absolute;
            bottom: 10px;
            right: 10px;
            width: 100px;
            opacity: 0;
            z-index: 1;
            pointer-events: none; /* Ensure it doesn't interfere with chart interactions */
        }

        .tooltip {
            position: absolute;
            background-color: var(--container-bg);
            border: 1px solid var(--border-color);
            border-radius: 6px;
            padding: 10px;
            font-size: 12px;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.2s;
            box-shadow: var(--shadow);
            z-index: 1000;
        }

        /* Custom button tooltips */
        .btn-tooltip {
            position: relative;
            display: inline-block;
        }

        .btn-tooltip .btn-tooltip-text {
            visibility: hidden;
            width: 120px;
            background-color: var(--container-bg);
            color: var(--text-color);
            text-align: center;
            border-radius: 6px;
            padding: 5px;
            position: absolute;
            z-index: 1001;
            bottom: 125%;
            left: 50%;
            margin-left: -60px;
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 12px;
            font-weight: normal;
            box-shadow: var(--shadow);
            border: 1px solid var(--border-color);
            pointer-events: none;
        }

        /* Hide button tooltips on mobile */
        @media (max-width: 768px) {
            .btn-tooltip .btn-tooltip-text {
                display: none;
            }
        }

        .btn-tooltip .btn-tooltip-text::after {
            content: "";
            position: absolute;
            top: 100%;
            left: 50%;
            margin-left: -5px;
            border-width: 5px;
            border-style: solid;
            border-color: var(--border-color) transparent transparent transparent;
        }

        .btn-tooltip:hover .btn-tooltip-text {
            visibility: visible;
            opacity: 1;
        }

        .player-name {
            font-size: 12px;
            font-weight: 500;
        }

        circle {
            cursor: pointer;
            transition: r 0.2s, fill 0.2s;
        }

        circle.highlighted {
            stroke: #ff00ff;
            stroke-width: 3px;
        }

        /* Add new styles for better search highlighting */
        circle.search-match {
            fill: #ff3366 !important; /* Bright pink fill */
            stroke: #ffffff;
            stroke-width: 2px;
            filter: drop-shadow(0 0 5px rgba(255, 51, 102, 0.7));
            animation: circlePulse 1.5s infinite ease-in-out;
        }

        .dark-mode circle.search-match {
            stroke: #000000;
        }

        @keyframes circlePulse {
            0% { r: 6; }
            50% { r: 9; }
            100% { r: 6; }
        }

        .team-label.search-match {
            font-weight: 700 !important;
            fill: #ff3366 !important;
            filter: drop-shadow(0 0 2px rgba(255, 255, 255, 1));
            opacity: 1 !important;
            animation: labelPulse 1.5s infinite ease-in-out;
        }

        @keyframes labelPulse {
            0% { font-size: 12px; }
            50% { font-size: 14px; }
            100% { font-size: 12px; }
        }

        .dark-mode .team-label.search-match {
            filter: drop-shadow(0 0 2px rgba(0, 0, 0, 1));
        }

        .team-label.search-dimmed {
            opacity: 0 !important;
        }

        .team-label {
            pointer-events: none;
            text-shadow: 0px 0px 2px white, 0px 0px 2px white, 0px 0px 2px white, 0px 0px 2px white;
        }

        .dark-mode .team-label {
            fill: #f5f5f5 !important;
            text-shadow: 0px 0px 2px #1a1a1a, 0px 0px 2px #1a1a1a, 0px 0px 2px #1a1a1a, 0px 0px 2px #1a1a1a;
        }

        .dark-mode-toggle {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: var(--container-bg);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: var(--shadow);
            z-index: 100;
            transition: background-color 0.3s;
        }

        .toggle-icon::before {
            font-family: "Ionicons";
            content: "\f467";
            font-size: 20px;
            color: var(--text-color);
        }

        .dark-mode .toggle-icon::before {
            content: "\f3b0";
        }

        @media (max-width: 768px) {
  
            
  .chart-wrapper {
      padding: 15px;
  }
  
  
  /* Remove fixed height for scatter plot - now handled by updateChartDimensions */
  #scatter-plot {
      min-height: 500px; /* Minimum height for mobile */
  }
  
  select, input {
      width: 100%;
  }
  
  
  /* Make text elements more readable on mobile */
  .x-label, .y-label {
      font-size: 12px;
  }
  
  /* Adjust tooltip position for mobile */
  .tooltip {
      max-width: 80%;
  }
}

        /* Styles for the diagonal reference line */
        .dark-mode .xy-line {
            stroke: #3cb371; /* Slightly different green for dark mode */
        }


  
  .search-input-modal {
      display: none;
      position: fixed; 
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.7); 
      z-index: 999; 
  }
  
  .search-input-container {
      position: absolute;
      top: 30%;
      left: 50%;
      transform: translate(-50%, -50%);
      background-color: #fff;
      padding: 20px;
      border-radius: 4px;
      z-index: 1000; 
  }
  
  #searchInput {
              width: 370px;
              padding: 12px;
              border: 3px solid #ccc;
              border-radius: 4px;
              font-size: 18.3px;
              outline: none;
              height: 50px;
              color: #000000;
              background-color: #fff;
              ;          }
  
          #autocompleteBox {
              width: 370px;
              max-height: 150px;
              overflow-y: auto;
              background-color: #fff;
          }
  
  
          #autocompleteBox ul {
              list-style: none;
              padding: 0;
              margin: 0;
          }
  
          #autocompleteBox li {
              margin: 0;
              padding: 5px;
          }
  
          #autocompleteBox {
              line-height: 2; 
              text-align: center !important;
  
          }
  
          #autocompleteBox a {
              text-decoration: none;
              font-family: Arial, sans-serif;
              text-align: center !important;
              color: #333 !important;
              cursor: pointer; 
          }
  
          #autocompleteBox li:hover {
              background-color: #f0f0f0;
          }
          #searchButton3 {
            padding: 8.5px;  /* Reduced from 10px */
  background-color: #0074d9;
  color: #fff;
  border: none;
  width: 34px;  /* Reduced from 40px */
  height: 34px;  /* Reduced from 40px */
  border-radius: 50%;
  cursor: pointer;
  font-size: 17px;  /* Reduced from 20px */
  }


  body.dark-mode .header .button10 {
      color: #aeaeae;
}
body.dark-mode .header .button10:hover {
  color: #2563eb;
background-color: #ffffff;
}

    body.dark-mode header a {
      color: #aeaeae;
}

body.dark-mode .header .logo img {
  opacity: 0.88;
}


body.dark-mode .language-button {
      background-color: #0F0F0E;
      color: #aeaeae;
}

body.dark-mode .language-button:hover {
      background-color: #0F0F0E;
      color: #aeaeae;
}



  

.header .logo {
  display: flex;
  align-items: center;
  margin-right: auto; /* Push logo to the left */
}

.header .logo img {
  height: 34px;
  width: auto;
  opacity: 0.84;
}
.header .logo-text {
  margin-left: 10px;
  font-size: 23px;
  font-weight: 600;
  transform: translateY(-1.1px); /* Move logo text slightly higher */
}

.header .navigation {
  display: flex;
  align-items: center;
  gap: 25px; /* Reduced gap between buttons */
  position: absolute;
  left: 50%;
  transform: translateX(-50%) translateY(-2px); /* Center the navigation and move it higher */
}



.header .button10 {
  padding: 0.5rem 1rem;
  text-decoration: none;
  color: #333;
  line-height: 1.6;
  border-radius: 4px;
  transition: background-color 0.2s;
  font-size: 1.1rem;  /* Added larger font size */
}


.header .button10:hover {
  background-color: #f0f0f0;
  color: #2563eb;

}



/* Group search and language buttons */
.header-right {
  display: flex;
  align-items: center;
  gap: 10px;
  margin-left: auto; /* Push buttons to the right */
  transform: translateY(-1.25px); /* Move search and language buttons higher */
}

header a {
      color: black;
      text-decoration: none;
    }

    .language-switcher-container {
  position: relative;
  display: none;
}

.language-button {
  background: none;
  border: none;
  cursor: pointer;
  padding: 10px;
  color: #444444;
  display: flex;
  align-items: center;
  font-size: 17px;
}

.language-button iconify-icon {
  font-size: 24px;
  opacity: 0.7;
}

.language-dropdown {
  display: none;
  position: absolute;
  top: 100%;
  right: 0;
  background: white;
  border-radius: 8px;
  box-shadow: 0 2px 10px rgba(0,0,0,0.1);
  padding: 10px;
  width: 200px;
  z-index: 1000;
}

.language-option {
  display: flex;
  align-items: center;
  padding: 8px 12px;
  cursor: pointer;
  border-radius: 4px;
  color: #444444;
  text-decoration: none;
}



.language-option iconify-icon {
  margin-right: 10px;
  font-size: 20px;
}

.language-dropdown.show {
  display: block;
}

/* Styles for flag icons in select dropdown */
#select-league option {
    display: flex;
    align-items: center;
    padding: 8px 12px;
}

#select-league iconify-icon {
    display: inline-flex;
    vertical-align: middle;
}

/* Styles for custom league selector dropdown */
.custom-select-container {
    position: relative;
    width: 172px;
}

.metric-select-container {
    position: relative;
    width: 192px;
}

.custom-select-trigger, .metric-select-trigger {
    display: flex;
    align-items: center;
    padding: 0 12px;
    border: 1px solid var(--border-color);
    border-radius: 6px;
    background-color: var(--container-bg);
    color: var(--text-color);
    font-family: 'Inter', sans-serif;
    font-size: 14px;
    cursor: pointer;
    user-select: none;
    position: relative;
    line-height: 1;
}

.custom-select-trigger span, .metric-select-trigger span {
    display: inline-block;
    transform: translateY(1px);
}

.custom-select-trigger::after, .metric-select-trigger::after {
    content: '';
    width: 6px;
    height: 6px;
    margin-left: auto;
    border-right: 1.5px solid var(--text-color);
    border-bottom: 1.5px solid var(--text-color);
    transform: rotate(45deg) translateY(-2px);
    transition: transform 0.3s;
    opacity: 0.7;
    margin-right: 2px;
}

.custom-select-trigger.open::after, .metric-select-trigger.open::after {
    transform: rotate(-135deg) translateY(1px);
}

.custom-select-options, .metric-select-options {
    position: absolute;
    top: 100%;
    left: 0;
    right: 0;
    background-color: var(--container-bg);
    border: 1px solid var(--border-color);
    border-radius: 6px;
    margin-top: 5px;
    max-height: 300px;
    overflow-y: auto;
    z-index: 100;
    font-size: 13px;
    display: none;
    box-shadow: var(--shadow);
}

.custom-select-option, .metric-select-option {
    display: flex;
    align-items: center;
    padding: 8px 12px;
    cursor: pointer;
}

.custom-select-option:hover, .metric-select-option:hover {
    background-color: var(--hover-color);
}

.custom-select-option.selected, .metric-select-option.selected {
    background-color: rgba(52, 152, 219, 0.1);
}

.custom-select-option iconify-icon, .metric-select-option iconify-icon {
    margin-right: 8px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
}

body.dark-mode .language-button:hover {
      background-color: #0F0F0E;
      color: #aeaeae;
}

body.dark-mode .language-dropdown {
  background: #e8e6e6;
}

body.dark-mode .language-option {
  color: #000000;
}

/* Dark mode styles for custom dropdown */
.dark-mode .custom-select-trigger,
.dark-mode .custom-select-options,
.dark-mode .metric-select-trigger,
.dark-mode .metric-select-options {
    border-color: var(--border-color);
    background-color: var(--container-bg);
    color: var(--text-color);
}

.dark-mode .custom-select-option:hover,
.dark-mode .metric-select-option:hover {
    background-color: var(--hover-color);
}

.dark-mode .custom-select-option.selected,
.dark-mode .metric-select-option.selected {
    background-color: rgba(52, 152, 219, 0.2);
}

.custom-select-option iconify-icon, .metric-select-option iconify-icon {
    margin-right: 8px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
}

/* Adjust flag icon alignment in the trigger */
#league-select-trigger iconify-icon {
    margin-right: 8px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    transform: translateY(-1px);
}
@media screen and (max-width: 550px) { .header .navigation { display: none; } }

        /* Enhanced Dark Mode Styles */
        .dark-mode .chart-wrapper {
            background-color: var(--container-bg);
            border: 1px solid #333;
        }

        .dark-mode .btn {
            background-color: var(--button-color);
        }

        .dark-mode .btn-outline {
            background-color: transparent;
            border: 1px solid var(--border-color);
            color: var(--text-color);
        }

        .dark-mode .btn-outline:hover {
            background-color: var(--hover-color);
            border-color: #444;
        }

        .dark-mode .position-btn {
            background-color: #1a1a1a;
            color: var(--text-color);
            border: 1px solid #333;
        }

        .dark-mode .position-btn:hover, 
        .dark-mode .position-btn.active {
            background-color: var(--primary-color);
            color: white;
        }

        .dark-mode input, 
        .dark-mode select {
            background-color: #1a1a1a;
            color: var(--text-color);
            border-color: #333;
        }

        .dark-mode input::placeholder {
            color: #777;
        }

        .dark-mode input:focus, 
        .dark-mode select:focus {
            border-color: var(--primary-color);
            outline: none;
        }

        .dark-mode .tooltip {
            background-color: #1a1a1a;
            border-color: #333;
            color: var(--text-color);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
        }

        .dark-mode .legend {
            border-top-color: #333;
        }

        .dark-mode .legend-item {
            color: #ccc;
        }

        .dark-mode .btn-tooltip .btn-tooltip-text {
            background-color: #1a1a1a;
            border-color: #333;
            color: #e0e0e0;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
        }

        .dark-mode .btn-tooltip .btn-tooltip-text::after {
            border-color: #333 transparent transparent transparent;
        }

        .dark-mode .team-label {
            fill: #e0e0e0 !important;
            text-shadow: 0px 0px 3px #0e0f0f, 0px 0px 3px #0e0f0f, 0px 0px 3px #0e0f0f, 0px 0px 3px #0e0f0f;
        }

        .dark-mode .x-axis path,
        .dark-mode .y-axis path,
        .dark-mode .x-axis line,
        .dark-mode .y-axis line {
            stroke: #444;
        }

        .dark-mode .x-axis text,
        .dark-mode .y-axis text {
            fill: #aaa;
        }

        .dark-mode .x-label,
        .dark-mode .y-label {
            fill: #ccc;
        }

        .dark-mode .median-line {
            stroke: rgba(255, 255, 255, 0.2) !important;
        }

        .dark-mode .xy-line {
            stroke: #2ecc71;
            opacity: 0.8;
        }

        .dark-mode .dark-mode-toggle {
            background-color: #1a1a1a;
            border: 1px solid #333;
        }

        .dark-mode .toggle-icon::before {
            color: #e0e0e0;
        }

 



        .dark-mode #searchButton3 {
            background-color: #0074d9;
            color: #fff;
        }


        .dark-mode .header .button10 {
            color: #aaa;
        }

        .dark-mode .header .button10:hover {
            color: #2563eb;
            background-color: #1a1a1a;
        }

        .dark-mode header a {
            color: #aaa;
        }

        .dark-mode .header .logo img {
            opacity: 0.9;
            filter: brightness(0.9);
        }

        .dark-mode .language-button {
            background-color: #0e0f0f;
            color: #aaa;
        }

        .dark-mode .language-button:hover {
            background-color: #1a1a1a;
        }

        .dark-mode .language-dropdown {
            background: #1a1a1a;
            border: 1px solid #333;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
        }

        .dark-mode .language-option {
            color: #e0e0e0;
        }

        .dark-mode .language-option:hover {
            background-color: #252525;
        }

        .dark-mode #search-bar::placeholder {
            color: #777;
        }

        .dark-mode circle {
            stroke-width: 1px;
        }

        .dark-mode circle.highlighted {
            stroke: #ff00ff;
            stroke-width: 3px;
        }

        .dark-mode circle.search-match {
            fill: #ff3366 !important;
            stroke: #0e0f0f;
            stroke-width: 2px;
            filter: drop-shadow(0 0 5px rgba(255, 51, 102, 0.7));
        }

        .dark-mode .watermark-logo {
            opacity: 0 !important;
            filter: brightness(0.7) invert(0.8);
        }
        
        /* Additional dark mode styles for chart elements */
        .dark-mode .chart-container {
            background-color: var(--container-bg);
        }
        
  
        
    
        
        .dark-mode .team-label.search-match {
            filter: drop-shadow(0 0 2px rgba(0, 0, 0, 1));
        }
        
        /* Fix for custom select dropdown in dark mode */
        .dark-mode .custom-select-trigger::after, 
        .dark-mode .metric-select-trigger::after {
            border-right: 1.5px solid var(--text-color);
            border-bottom: 1.5px solid var(--text-color);
        }
        
        /* Improve contrast for selected items in dark mode */
        .dark-mode .custom-select-option.selected, 
        .dark-mode .metric-select-option.selected {
            background-color: rgba(52, 152, 219, 0.3);
        }
        
        /* Improve visibility of SVG elements in dark mode */
        .dark-mode svg text {
            fill: #ccc;
        }
        
        .dark-mode .legend-color {
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        /* Improve button states in dark mode */
        .dark-mode .btn:hover {
            background-color: #3498db;
        }
        
        .dark-mode .btn-outline:active {
            background-color: #333;
        }
        
        /* Improve focus states for accessibility */
        .dark-mode input:focus,
        .dark-mode select:focus,
        .dark-mode .btn:focus {
            box-shadow: 0 0 0 2px rgba(52, 152, 219, 0.5);
        }
        
        /* Fix for buttons staying focused with blue outline */
        button:focus, 
        .btn:focus, 
        select:focus, 
        input:focus {
            outline: none;
        }
        
        /* Custom focus styles for better accessibility */
        button:focus-visible, 
        .btn:focus-visible, 
        select:focus-visible, 
        input:focus-visible {
            outline: none;
            box-shadow: 0 0 0 2px var(--primary-color);
        }
        
        /* Remove focus styles when using mouse */
        button:focus:not(:focus-visible), 
        .btn:focus:not(:focus-visible), 
        select:focus:not(:focus-visible), 
        input:focus:not(:focus-visible) {
            box-shadow: none;
        }



.logo img {
  width: 50px;
  height: 50px;
}

/* Promo links styling */
.promo-links-container {
    display: flex;
    justify-content: center;
    gap: 20px;
    margin: 15px auto 25px;
    max-width: 800px;
    flex-wrap: wrap;
    padding: 0 20px;
}

.promo-link {
    display: flex;
    align-items: center;
    padding: 10px 15px;
    background-color: var(--container-bg);
    color: var(--text-color);
    text-decoration: none;
    border-radius: 8px;
    border: 1px solid var(--border-color);
    transition: all 0.3s ease;
    box-shadow: var(--shadow);
    font-weight: 500;
    flex: 1;
    min-width: 220px;
    max-width: 350px;
    justify-content: center;
}

.promo-link iconify-icon {
    margin-right: 8px;
}

.promo-link:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

.radar-link {
    border-left: 4px solid #3498db;
}

.pro-link {
    border-left: 4px solid #f39c12;
}

.dark-mode .radar-link {
    border-left: 4px solid #2980b9;
}

.dark-mode .pro-link {
    border-left: 4px solid #d35400;
}

@media (max-width: 768px) {
  
    
    .control-group {
        width: 100%;
        margin-bottom: 10px;
    }
    
    select, input {
        width: 100%;
    }
    
    /* Make text elements more readable on mobile */
    .x-label, .y-label {
        font-size: 12px;
    }
    
    /* Adjust tooltip position for mobile */
    .tooltip {
        max-width: 80%;
    }
    
    /* Adjust promo links for mobile */
    .promo-links-container {
        flex-direction: column;
        align-items: center;
        gap: 10px;
        padding: 0 15px;
    }
}

    </style>

  <header class="header">
    <div class="logo">
      <a href="https://datamb.football">
        <img src="https://datamb.football/logo.png" alt="Football team statistics comparison. Radar comparison tool. Visualise and compare team data from the top 7 leagues : Premier League, La Liga, Bundesliga, Serie A, Ligue 1, Eredivisie, Primeira Liga" /></a>
        <div class="logo-text"><a href="https://datamb.football">&nbsp;Teams</a></div>
    </div>
    <nav class="navigation">
      <a href="https://datamb.football/teams" class="button10" data-i18n="header.home">Home</a>
      <a href="https://datamb.football/join" class="button10" data-i18n="header.pro">Pro</a>
      <a href="https://datamb.football/guide" class="button10" data-i18n="header.guide">Guide</a>
    </nav>
    <div class="header-right">
    <div class="search-container">
      <button id="searchButton3"><iconify-icon icon="ion:search-outline"></iconify-icon></button>
  </div>
    <div class="language-switcher-container">
      <button class="language-button" id="languageButton">
        <iconify-icon icon="heroicons:globe-alt"></iconify-icon>
      </button>
      <div class="language-dropdown" id="languageDropdown">
        <a href="?lang=en" class="language-option"><iconify-icon icon="flag:gb-4x3"></iconify-icon>English</a>
      </div>
    </div></div>
  </header>
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7677714701428206"
     crossorigin="anonymous"></script>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-PSBMXX80EF"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-PSBMXX80EF');
</script>
</head>
<div class="search-input-modal" id="searchInputModal">
    <div class="search-input-container">
        <input type="text" id="searchInput" data-i18n-placeholder="search.placeholder" placeholder="Enter a team or player name...">
        <div id="autocompleteBox"></div>
    </div>
</div>
<script>
    const xhr1 = new XMLHttpRequest();
  xhr1.open('GET', 'https://datamb.football/database/searchbar.csv', false); // false for synchronous request
  xhr1.send(null);
  
  let dataCSV = xhr1.responseText;
    
function _0x5707(_0xd20fa7,_0x4d36b5){const _0x4dcd69=_0x4dcd();return _0x5707=function(_0x57077a,_0xde96b9){_0x57077a=_0x57077a-0x140;let _0x383e81=_0x4dcd69[_0x57077a];return _0x383e81;},_0x5707(_0xd20fa7,_0x4d36b5);}const _0xedf2b2=_0x5707;(function(_0x16e1b0,_0x125833){const _0x222c5a=_0x5707,_0x3f540c=_0x16e1b0();while(!![]){try{const _0x3105f2=parseInt(_0x222c5a(0x161))/0x1+parseInt(_0x222c5a(0x144))/0x2+parseInt(_0x222c5a(0x148))/0x3+-parseInt(_0x222c5a(0x155))/0x4+parseInt(_0x222c5a(0x141))/0x5*(-parseInt(_0x222c5a(0x145))/0x6)+-parseInt(_0x222c5a(0x157))/0x7+parseInt(_0x222c5a(0x14b))/0x8*(parseInt(_0x222c5a(0x159))/0x9);if(_0x3105f2===_0x125833)break;else _0x3f540c['push'](_0x3f540c['shift']());}catch(_0x450250){_0x3f540c['push'](_0x3f540c['shift']());}}}(_0x4dcd,0x1bc51));const dataLines=dataCSV[_0xedf2b2(0x160)]('\x0a'),searchButton3=document[_0xedf2b2(0x142)]('searchButton3'),searchInputModal=document[_0xedf2b2(0x142)](_0xedf2b2(0x14a)),searchInput=document[_0xedf2b2(0x142)](_0xedf2b2(0x143)),autocompleteBox=document[_0xedf2b2(0x142)](_0xedf2b2(0x162)),data11=dataLines[_0xedf2b2(0x146)](_0x19546c=>{const _0x89300c=_0xedf2b2,[_0x5af128,_0x515bec]=_0x19546c[_0x89300c(0x160)](',');return{'name':_0x5af128,'link':_0x515bec};});function removeDiacritics(_0x3ed1af){const _0x202611=_0xedf2b2,_0x4b45cf={'ø':'o','Ø':'O','ı':'i'};return _0x3ed1af=_0x3ed1af[_0x202611(0x147)](/[øØıI]/g,_0x19f74a=>_0x4b45cf[_0x19f74a]),_0x3ed1af[_0x202611(0x15d)]('NFD')[_0x202611(0x147)](/[\u0300-\u036f]/g,'');}function search2(_0x1db14d){const _0x26c944=_0xedf2b2;autocompleteBox[_0x26c944(0x15e)]='';const _0x321867=removeDiacritics(_0x1db14d)[_0x26c944(0x147)](/[^\w\s]/g,'')[_0x26c944(0x149)](),_0x3ad89e=data11[_0x26c944(0x15c)](_0xb995bf=>{const _0x3866b0=_0x26c944,_0x2b7de7=removeDiacritics(_0xb995bf[_0x3866b0(0x14e)])['replace'](/[^\w\s]/g,'')[_0x3866b0(0x149)]();return _0x2b7de7['includes'](_0x321867);});if(_0x3ad89e[_0x26c944(0x163)]===0x0){autocompleteBox[_0x26c944(0x152)][_0x26c944(0x14c)]='none';return;}_0x3ad89e[_0x26c944(0x151)](_0x4b9def=>{const _0x31eeb1=_0x26c944,_0x505ab8=document[_0x31eeb1(0x14d)]('div'),_0x3a2d70=document[_0x31eeb1(0x14d)]('a');_0x3a2d70['href']=_0x4b9def[_0x31eeb1(0x154)],_0x3a2d70[_0x31eeb1(0x150)]=_0x4b9def[_0x31eeb1(0x14e)],_0x505ab8[_0x31eeb1(0x15b)](_0x3a2d70),autocompleteBox[_0x31eeb1(0x15b)](_0x505ab8);}),autocompleteBox['style'][_0x26c944(0x14c)]=_0x26c944(0x153);}searchButton3[_0xedf2b2(0x156)](_0xedf2b2(0x14f),()=>{const _0x350b96=_0xedf2b2;searchInputModal['style'][_0x350b96(0x14c)]=_0x350b96(0x153);}),searchInput['addEventListener'](_0xedf2b2(0x158),()=>{const _0x122364=_0xedf2b2,_0x1aac33=searchInput['value'];_0x1aac33[_0x122364(0x140)]()===''?autocompleteBox[_0x122364(0x152)][_0x122364(0x14c)]='none':search2(_0x1aac33);}),document['addEventListener']('click',_0x17873a=>{const _0x2c2a21=_0xedf2b2;_0x17873a[_0x2c2a21(0x15a)]===searchInputModal&&(searchInputModal[_0x2c2a21(0x152)][_0x2c2a21(0x14c)]=_0x2c2a21(0x15f));});function _0x4dcd(){const _0x3abacf=['forEach','style','block','link','165476bdcaHI','addEventListener','430668iEzpyY','input','90cmGEmO','target','appendChild','filter','normalize','innerHTML','none','split','102625kyWWmb','autocompleteBox','length','trim','5KymJaR','getElementById','searchInput','423476PJmBDe','1170534HGXHHf','map','replace','60222cRWbFM','toLowerCase','searchInputModal','61832bbygIm','display','createElement','name','click','textContent'];_0x4dcd=function(){return _0x3abacf;};return _0x4dcd();}
  
  
  
  </script>


<body>
    <div class="container">
        <div class="chart-wrapper">
            <div class="controls">
                <select id="select-x" style="display: none;"></select>
                <select id="select-y" style="display: none;"></select>
                <select id="select-league" style="display: none;" onchange="updateChart()">
                    <option value="all">Top 7 Leagues</option>
                    <option value="Top 5 Leagues">Top 5 Leagues</option>
                    <option value="Premier League">Premier League</option>
                    <option value="La Liga">La Liga</option>
                    <option value="Bundesliga">Bundesliga</option>
                    <option value="Serie A">Serie A</option> 
                    <option value="Ligue 1">Ligue 1</option>
                    <option value="Eredivisie">Eredivisie</option>
                    <option value="Primeira Liga">Liga Portugal</option>
                </select>
                
                <!-- Custom X metric selector -->
                <div class="metric-select-container">
                    <div class="metric-select-trigger" id="x-metric-trigger">
                        <span data-i18n="metrics.goals-per-90">Goals per 90</span>
                    </div>
                    <div class="metric-select-options" id="x-metric-options">
                        <!-- Options will be populated by JavaScript -->
                    </div>
                </div>
                
                <!-- Custom Y metric selector -->
                <div class="metric-select-container">
                    <div class="metric-select-trigger" id="y-metric-trigger">
                        <span data-i18n="metrics.xg-per-90">xG per 90</span>
                    </div>
                    <div class="metric-select-options" id="y-metric-options">
                        <!-- Options will be populated by JavaScript -->
                    </div>
                </div>
                
                <!-- Custom league selector with flag icons -->
                <div class="custom-select-container">
                    <div class="custom-select-trigger" id="league-select-trigger">
                        <iconify-icon icon="emojione:flag-for-flag-european-union" width="18" height="18"></iconify-icon>
                        <span data-i18n="leagues.top7">Top 7 Leagues</span>
                    </div>
                    <div class="custom-select-options" id="league-select-options">
                        <div class="custom-select-option selected" data-value="all">
                            <iconify-icon icon="emojione:flag-for-flag-european-union" width="18" height="18"></iconify-icon>
                            <span data-i18n="leagues.top7">Top 7 Leagues</span>
                        </div>
                        <div class="custom-select-option" data-value="Top 5 Leagues">
                            <iconify-icon icon="emojione:flag-for-flag-european-union" width="18" height="18"></iconify-icon>
                            <span data-i18n="leagues.top5">Top 5 Leagues</span>
                        </div>
                        <div class="custom-select-option" data-value="Premier League">
                            <iconify-icon icon="emojione:flag-for-united-kingdom" width="18" height="18"></iconify-icon>
                            <span>Premier League</span>
                        </div>
                        <div class="custom-select-option" data-value="La Liga">
                            <iconify-icon icon="emojione:flag-for-spain" width="18" height="18"></iconify-icon>
                            <span>La Liga</span>
                        </div>
                        <div class="custom-select-option" data-value="Bundesliga">
                            <iconify-icon icon="emojione:flag-for-germany" width="18" height="18"></iconify-icon>
                            <span>Bundesliga</span>
                        </div>
                        <div class="custom-select-option" data-value="Serie A">
                            <iconify-icon icon="emojione:flag-for-italy" width="18" height="18"></iconify-icon>
                            <span>Serie A</span>
                        </div>
                        <div class="custom-select-option" data-value="Ligue 1">
                            <iconify-icon icon="emojione:flag-for-france" width="18" height="18"></iconify-icon>
                            <span>Ligue 1</span>
                        </div>
                        <div class="custom-select-option" data-value="Eredivisie">
                            <iconify-icon icon="emojione:flag-for-netherlands" width="18" height="18"></iconify-icon>
                            <span>Eredivisie</span>
                        </div>
                        <div class="custom-select-option" data-value="Primeira Liga">
                            <iconify-icon icon="emojione:flag-for-portugal" width="18" height="18"></iconify-icon>
                            <span>Liga Portugal</span>
                        </div>
                    </div>
                </div>
                
                <input type="text" id="search-bar" data-i18n-placeholder="search.placeholder2" placeholder="Search team...">
                <div class="btn-tooltip">
                    <button id="toggle-median-lines" class="btn btn-outline btn-icon">
                        <div class="icon">
                            <i class="ion-stats-bars"></i>
                        </div>
                    </button>
                    <span class="btn-tooltip-text" id="median-lines-tooltip" data-i18n="tooltip.median-lines">Show median lines</span>
                </div>
                <div class="btn-tooltip">
                    <button class="btn btn-outline btn-icon" id="select-all-button" onclick="selectAllCircles()">
                        <div class="icon">
                            <i class="ion-ios-circle-filled" id="select-icon"></i>
                        </div>
                    </button>
                    <span class="btn-tooltip-text" id="select-all-tooltip" data-i18n="tooltip.select-all">Select all teams</span>
                </div>
                <div class="btn-tooltip">
                    <button class="btn btn-outline btn-icon" onclick="takeScreenshot()">
                        <div class="icon">
                            <i class="ion-camera"></i>
                        </div>
                    </button>
                    <span class="btn-tooltip-text" data-i18n="tooltip.screenshot">Download chart as image</span>
                </div>
            </div>
       
            <div class="chart-container">
              <svg id="scatter-plot"></svg>
            </div>

            <div class="legend" id="league-legend">
              <!-- Legend items will be added here dynamically -->
            </div>
        </div>

        <div class="promo-links-container">
            <a href="https://datamb.football/teamradars" class="promo-link radar-link">
                <iconify-icon icon="mdi:radar" width="20" height="20"></iconify-icon>
                <span data-i18n="promo.radar-link">Compare Teams with Radars</span>
            </a>
            <a href="https://datamb.football/join" class="promo-link pro-link">
                <iconify-icon icon="mdi:account-star" width="20" height="20"></iconify-icon>
                <span data-i18n="promo.pro-link">Get Pro for Player Plots</span>
            </a>
        </div>
    </div>

    <div class="dark-mode-toggle" onclick="toggleDarkMode()">
        <div class="toggle-icon"></div>
    </div>



    <script>
        // ... existing scripts ...
        
        // Function to toggle dark mode
        function toggleDarkMode() {
            const body = document.querySelector("body");
            body.classList.toggle("dark-mode");
            
            // Store the user's preference in local storage
            const isDarkMode = body.classList.contains("dark-mode");
            localStorage.setItem("darkMode", isDarkMode);
            
            // Update chart to apply dark mode styles to SVG elements
            updateChart();
        }
        
        // Check if user has a stored preference for dark mode
        document.addEventListener('DOMContentLoaded', function() {
            const storedDarkMode = localStorage.getItem("darkMode");
            
            if (storedDarkMode === "true") {
                const body = document.querySelector("body");
                body.classList.add("dark-mode");
            }
            
            // Add transition for smoother dark mode toggle
            setTimeout(() => {
                document.body.style.transition = "background-color 0.3s, color 0.3s";
                document.querySelectorAll('.chart-wrapper, .header, .btn, input, select, .tooltip, .dark-mode-toggle')
                    .forEach(el => {
                        el.style.transition = "background-color 0.3s, color 0.3s, border-color 0.3s, box-shadow 0.3s";
                    });
            }, 100);
        });
        
        // We'll initialize the custom selectors after the data is loaded
        let initializeCustomSelectors = function() {
            // League selector functionality
            const leagueTrigger = document.getElementById('league-select-trigger');
            const leagueOptions = document.getElementById('league-select-options');
            const leagueSelect = document.getElementById('select-league');
            
            setupCustomSelect(leagueTrigger, leagueOptions, leagueSelect);
            
            // X metric selector functionality
            const xTrigger = document.getElementById('x-metric-trigger');
            const xOptions = document.getElementById('x-metric-options');
            const xSelect = document.getElementById('select-x');
            
            // Populate X metric options
            populateMetricOptions(xOptions, header.slice(3), function(option, value) {
                if (xTrigger.querySelector('span').textContent === value) {
                    option.classList.add('selected');
                }
                if (value === header[3]) { // Default value
                    option.classList.add('selected');
                    // Update trigger text
                    xTrigger.querySelector('span').textContent = value;
                    const metricKey = value.toLowerCase().replace(/ /g, '-').replace(/%/g, 'pct');
                    xTrigger.querySelector('span').setAttribute('data-i18n', 'metrics.' + metricKey);
                }
            });
            
            setupCustomSelect(xTrigger, xOptions, xSelect);
            
            // Y metric selector functionality
            const yTrigger = document.getElementById('y-metric-trigger');
            const yOptions = document.getElementById('y-metric-options');
            const ySelect = document.getElementById('select-y');
            
            // Populate Y metric options
            populateMetricOptions(yOptions, header.slice(3), function(option, value) {
                if (yTrigger.querySelector('span').textContent === value) {
                    option.classList.add('selected');
                }
                if (value === header[4]) { // Default value
                    option.classList.add('selected');
                    // Update trigger text
                    yTrigger.querySelector('span').textContent = value;
                    const metricKey = value.toLowerCase().replace(/ /g, '-').replace(/%/g, 'pct');
                    yTrigger.querySelector('span').setAttribute('data-i18n', 'metrics.' + metricKey);
                }
            });
            
            setupCustomSelect(yTrigger, yOptions, ySelect);
        };
        
        // Function to populate metric options
        function populateMetricOptions(optionsContainer, metrics, callback) {
            // Clear existing options
            optionsContainer.innerHTML = '';
            
            // Create a custom option for each metric
            metrics.forEach(function(metric) {
                const customOption = document.createElement('div');
                customOption.className = 'metric-select-option';
                customOption.setAttribute('data-value', metric);
                
                const span = document.createElement('span');
                span.textContent = metric;
                
                // Add data-i18n attribute for translation
                const metricKey = metric.toLowerCase().replace(/ /g, '-').replace(/%/g, 'pct');
                span.setAttribute('data-i18n', 'metrics.' + metricKey);
                
                customOption.appendChild(span);
                
                // Call the callback to potentially add selected class
                if (callback) callback(customOption, metric);
                
                optionsContainer.appendChild(customOption);
            });
        }
        
        // Function to set up a custom select
        function setupCustomSelect(trigger, options, selectElement) {
            // Toggle dropdown when clicking the trigger
            trigger.addEventListener('click', function() {
                // Close all other open dropdowns first
                document.querySelectorAll('.custom-select-trigger.open, .metric-select-trigger.open').forEach(function(openTrigger) {
                    if (openTrigger !== trigger) {
                        openTrigger.classList.remove('open');
                        const openOptions = openTrigger.nextElementSibling;
                        if (openOptions) openOptions.style.display = 'none';
                    }
                });
                
                // Toggle this dropdown
                trigger.classList.toggle('open');
                const isOpen = trigger.classList.contains('open');
                options.style.display = isOpen ? 'block' : 'none';
            });
            
            // Handle option selection
            const optionElements = options.querySelectorAll('.custom-select-option, .metric-select-option');
            optionElements.forEach(option => {
                option.addEventListener('click', function() {
                    // Update selected option
                    optionElements.forEach(opt => opt.classList.remove('selected'));
                    this.classList.add('selected');
                    
                    // Update trigger content
                    const text = this.querySelector('span').textContent;
                    const dataI18n = this.querySelector('span').getAttribute('data-i18n');
                    const icon = this.querySelector('iconify-icon');
                    
                    trigger.innerHTML = '';
                    
                    if (icon) {
                        const clonedIcon = icon.cloneNode(true);
                        clonedIcon.style.marginRight = '8px';
                        trigger.appendChild(clonedIcon);
                    }
                    
                    const span = document.createElement('span');
                    span.textContent = text;
                    if (dataI18n) {
                        span.setAttribute('data-i18n', dataI18n);
                    }
                    trigger.appendChild(span);
                    
                    // Update hidden select and trigger change event
                    const value = this.getAttribute('data-value');
                    selectElement.value = value || text;
                    
                    // Trigger the change event on the hidden select
                    const event = new Event('change');
                    selectElement.dispatchEvent(event);
                    
                    // Close dropdown
                    trigger.classList.remove('open');
                    options.style.display = 'none';
                });
            });
            
            // Add keyboard navigation
            let searchTerm = '';
            let searchTimeout;
            
            // Add keydown event listener to the document
            document.addEventListener('keydown', function(e) {
                // Only process keyboard input when dropdown is open
                if (!trigger.classList.contains('open')) return;
                
                // Handle arrow keys for navigation
                if (e.key === 'ArrowDown' || e.key === 'ArrowUp') {
                    e.preventDefault();
                    
                    const visibleOptions = Array.from(optionElements);
                    const currentIndex = visibleOptions.findIndex(opt => opt.classList.contains('selected'));
                    let newIndex;
                    
                    if (e.key === 'ArrowDown') {
                        newIndex = currentIndex < visibleOptions.length - 1 ? currentIndex + 1 : 0;
                    } else {
                        newIndex = currentIndex > 0 ? currentIndex - 1 : visibleOptions.length - 1;
                    }
                    
                    // Update selection
                    optionElements.forEach(opt => opt.classList.remove('selected'));
                    visibleOptions[newIndex].classList.add('selected');
                    
                    // Ensure the selected option is visible in the dropdown
                    visibleOptions[newIndex].scrollIntoView({ block: 'nearest' });
                    
                    return;
                }
                
                // Handle Enter key to select the currently highlighted option
                if (e.key === 'Enter') {
                    e.preventDefault();
                    const selectedOption = options.querySelector('.selected');
                    if (selectedOption) {
                        selectedOption.click();
                    }
                    return;
                }
                
                // Handle Escape key to close the dropdown
                if (e.key === 'Escape') {
                    e.preventDefault();
                    trigger.classList.remove('open');
                    options.style.display = 'none';
                    return;
                }
                
                // Handle typing to search
                if (e.key.length === 1 && e.key.match(/[a-zA-Z0-9%]/)) {
                    // Clear the previous timeout
                    clearTimeout(searchTimeout);
                    
                    // Add the key to the search term
                    searchTerm += e.key.toLowerCase();
                    
                    // Find the first option that starts with the search term
                    const matchingOption = Array.from(optionElements).find(option => {
                        const optionText = option.querySelector('span').textContent.toLowerCase();
                        return optionText.startsWith(searchTerm);
                    });
                    
                    // If a matching option is found, select it
                    if (matchingOption) {
                        optionElements.forEach(opt => opt.classList.remove('selected'));
                        matchingOption.classList.add('selected');
                        matchingOption.scrollIntoView({ block: 'nearest' });
                    }
                    
                    // Clear the search term after a delay
                    searchTimeout = setTimeout(() => {
                        searchTerm = '';
                    }, 1000);
                }
            });
        }
        
        // Close dropdowns when clicking outside
        document.addEventListener('click', function(e) {
            const triggers = document.querySelectorAll('.custom-select-trigger, .metric-select-trigger');
            const optionsContainers = document.querySelectorAll('.custom-select-options, .metric-select-options');
            
            let clickedInsideDropdown = false;
            
            triggers.forEach(function(trigger, index) {
                const options = optionsContainers[index];
                
                if (trigger && options && (trigger.contains(e.target) || options.contains(e.target))) {
                    clickedInsideDropdown = true;
                }
            });
            
            if (!clickedInsideDropdown) {
                triggers.forEach(function(trigger, index) {
                    if (trigger && optionsContainers[index]) {
                        trigger.classList.remove('open');
                        optionsContainers[index].style.display = 'none';
                    }
                });
            }
        });
        
        // Function to capture and download the chart area
        function takeScreenshot() {
            // Get the chart container element (includes SVG and watermark)
            const chartContainer = document.querySelector('.chart-container');
            
            // Check if we're in dark mode
            const isDarkMode = document.body.classList.contains('dark-mode');
            
            // Use html2canvas to capture the entire chart container with watermark
            html2canvas(chartContainer, {
                scale: 2, // 2x resolution for higher quality
                backgroundColor: isDarkMode ? '#2c2c2c' : '#FFFFFF',
                allowTaint: true,
                useCORS: true,
                logging: false
            }).then(function(renderedCanvas) {
                // Convert canvas to image and trigger download
                const dataURL = renderedCanvas.toDataURL('image/png', 1.0); // Use maximum quality
                const link = document.createElement('a');
                link.download = 'DataMB Screenshot.png';
                link.href = dataURL;
                link.click();
            }).catch(function(error) {
                console.error('Screenshot failed:', error);
                
                // Fallback method if html2canvas fails
                fallbackScreenshot(isDarkMode);
            });
        }
        
        // Fallback screenshot method that captures just the SVG but with higher quality
        function fallbackScreenshot(isDarkMode) {
            // Get the SVG element
            const svg = document.getElementById('scatter-plot');
            const watermark = document.querySelector('.watermark-logo');
            
            // Get dimensions
            const svgRect = svg.getBoundingClientRect();
            
            // Create a canvas with 2x resolution for higher quality
            const canvas = document.createElement('canvas');
            const scale = 2; // Increase resolution by 2x
            canvas.width = svgRect.width * scale;
            canvas.height = svgRect.height * scale;
            
            const ctx = canvas.getContext('2d');
            ctx.scale(scale, scale); // Scale the context to match our increased canvas size
            
            // Set high quality rendering
            ctx.imageSmoothingEnabled = true;
            ctx.imageSmoothingQuality = 'high';
            
            // Fill canvas with appropriate background color
            ctx.fillStyle = isDarkMode ? '#2c2c2c' : '#FFFFFF';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // First draw the watermark
            const watermarkImg = new Image();
            watermarkImg.crossOrigin = "Anonymous";
            watermarkImg.src = watermark.src;
            
            // Create an image from the SVG
            const svgImg = new Image();
            
            // Get SVG data with proper XML serialization
            const svgData = new XMLSerializer().serializeToString(svg);
            const svgBlob = new Blob([svgData], {type: 'image/svg+xml;charset=utf-8'});
            const url = URL.createObjectURL(svgBlob);
            
            // First load the watermark
            watermarkImg.onload = function() {
                // Calculate watermark position (centered)
                const wmX = (svgRect.width - watermark.width) / 2;
                const wmY = (svgRect.height - watermark.height) / 2;
                
                // Draw watermark with proper opacity
                ctx.globalAlpha = 0.04; // Match the CSS opacity
                ctx.drawImage(watermarkImg, wmX, wmY, watermark.width, watermark.height);
                ctx.globalAlpha = 1.0;
                
                // Then load and draw the SVG
                svgImg.onload = function() {
                    // Draw the SVG on top
                    ctx.drawImage(svgImg, 0, 0, svgRect.width, svgRect.height);
                    
                    // Convert canvas to image and trigger download
                    const dataURL = canvas.toDataURL('image/png', 1.0); // Use maximum quality
                    const link = document.createElement('a');
                    link.download = 'team-performance-chart.png';
                    link.href = dataURL;
                    link.click();
                    
                    // Clean up
                    URL.revokeObjectURL(url);
                };
                
                svgImg.src = url;
            };
        }
        
        // Add event listeners for position buttons
        document.querySelectorAll('.position-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                document.querySelectorAll('.position-btn').forEach(b => b.classList.remove('active'));
                this.classList.add('active');
                // Add position filtering logic here
            });
        });
        
   
    </script>
    
    <script>

        var _0x2f87be=_0x37d9;(function(_0xf2a19,_0x47464c){var _0x4441b2=_0x37d9,_0x1ef13c=_0xf2a19();while(!![]){try{var _0x668044=-parseInt(_0x4441b2(0x23e))/0x1*(-parseInt(_0x4441b2(0x21c))/0x2)+parseInt(_0x4441b2(0x263))/0x3*(-parseInt(_0x4441b2(0x272))/0x4)+-parseInt(_0x4441b2(0x249))/0x5+parseInt(_0x4441b2(0x233))/0x6+parseInt(_0x4441b2(0x1c8))/0x7+parseInt(_0x4441b2(0x252))/0x8*(-parseInt(_0x4441b2(0x1e1))/0x9)+parseInt(_0x4441b2(0x218))/0xa;if(_0x668044===_0x47464c)break;else _0x1ef13c['push'](_0x1ef13c['shift']());}catch(_0x4fbfb2){_0x1ef13c['push'](_0x1ef13c['shift']());}}}(_0x5473,0xae428));function getTranslation(_0x1f9d62,_0x32f50f){var _0x49d18f=_0x37d9;const _0x55f5a1=_0x1f9d62['split']('.');try{let _0x1a661d=window[_0x49d18f(0x242)]||{};for(const _0xbc3c78 of _0x55f5a1){if(_0x1a661d&&_0x1a661d[_0xbc3c78])_0x1a661d=_0x1a661d[_0xbc3c78];else return _0x32f50f;}return _0x1a661d;}catch(_0x575b2a){return _0x32f50f;}}const xhr=new XMLHttpRequest();xhr[_0x2f87be(0x1c0)](_0x2f87be(0x22c),'https://datamb.football/database/TEAM/teamplots.csv',![]),xhr[_0x2f87be(0x1fd)](null);let csvData=xhr[_0x2f87be(0x280)],extraHeaderRow=_0x2f87be(0x1fb);csvData=extraHeaderRow+csvData;var rows=csvData[_0x2f87be(0x256)]()[_0x2f87be(0x253)]('\x0a'),header=rows[0x0][_0x2f87be(0x253)](','),data=rows[_0x2f87be(0x251)](0x1)['map'](function(_0x493189){var _0x576c76=_0x2f87be;return _0x493189[_0x576c76(0x253)](',')['map'](function(_0x523096,_0x58a5ed){return _0x58a5ed>=0x3?parseFloat(_0x523096):_0x523096;});}),margin={'top':0x0,'right':0x0,'bottom':0x0,'left':0x0},width=0x43a-margin[_0x2f87be(0x206)]-margin[_0x2f87be(0x227)],height=0x302-margin[_0x2f87be(0x1d0)]-margin['bottom'],leagueColors={'Premier\x20League':_0x2f87be(0x234),'La\x20Liga':_0x2f87be(0x200),'Bundesliga':_0x2f87be(0x276),'Serie\x20A':'rgba(0,\x20128,\x200,\x200.7)','Ligue\x201':'rgba(0,\x200,\x20255,\x200.7)','Eredivisie':_0x2f87be(0x238),'Primeira\x20Liga':'rgba(238,\x20130,\x20238,\x200.7)'};function getLeagueColor(_0x24599d){return leagueColors[_0x24599d]||'rgba(255,\x200,\x200,\x200.7)';}function updateChartDimensions(){var _0x30bb21=_0x2f87be,_0x24ae93=document[_0x30bb21(0x279)](_0x30bb21(0x27b))[_0x30bb21(0x20c)],_0x41c8e5=window[_0x30bb21(0x224)]*0.7,_0x38ffd8=0x1e,_0x389c33=Math[_0x30bb21(0x267)](0x43a,_0x24ae93-_0x38ffd8*0x2),_0xb24e54=window[_0x30bb21(0x1da)]/window[_0x30bb21(0x224)]<0x1;if(_0xb24e54){margin={'top':0x28,'right':0x1e,'bottom':0x3c,'left':0x4b};var _0x3c7879=1.4,_0x5cea6d=Math[_0x30bb21(0x267)](_0x41c8e5,_0x389c33*_0x3c7879);_0x5cea6d=Math[_0x30bb21(0x23f)](_0x5cea6d,0x1f4);}else{margin={'top':0x28,'right':0x1e,'bottom':0x3c,'left':0x4f};var _0x78e132=0.7,_0x5cea6d=_0x389c33*_0x78e132;}width=_0x389c33-margin['left']-margin[_0x30bb21(0x227)],height=_0x5cea6d-margin[_0x30bb21(0x1d0)]-margin[_0x30bb21(0x287)],d3[_0x30bb21(0x222)](_0x30bb21(0x1cc))['attr'](_0x30bb21(0x278),_0x389c33)[_0x30bb21(0x1eb)](_0x30bb21(0x22b),_0x5cea6d),document['querySelector'](_0x30bb21(0x270))[_0x30bb21(0x21d)][_0x30bb21(0x22b)]=_0x5cea6d+'px';}window[_0x2f87be(0x1fa)](_0x2f87be(0x1ec),function(){var _0x2450d2=_0x2f87be;clearTimeout(window['resizeTimer']),window[_0x2450d2(0x1d8)]=setTimeout(function(){updateChartDimensions(),updateChart();},0xfa);}),updateChartDimensions();function debounce(_0x289878,_0x4c3622){let _0xd87e8e;return function(){const _0x102e1a=this,_0x2b17bb=arguments;clearTimeout(_0xd87e8e),_0xd87e8e=setTimeout(function(){var _0x1b0134=_0x37d9;_0x289878[_0x1b0134(0x1e8)](_0x102e1a,_0x2b17bb);},_0x4c3622);};}var prevWindowWidth=window[_0x2f87be(0x1da)],prevWindowHeight=window[_0x2f87be(0x224)];window[_0x2f87be(0x1fa)](_0x2f87be(0x1ec),debounce(function(){var _0x1b9ebc=_0x2f87be,_0x39438e=prevWindowWidth/prevWindowHeight<0x1,_0x36885e=window[_0x1b9ebc(0x1da)]/window[_0x1b9ebc(0x224)]<0x1;prevWindowWidth=window[_0x1b9ebc(0x1da)],prevWindowHeight=window[_0x1b9ebc(0x224)],updateChart();},0xfa));var medianLinesVisible=![],selectX=d3[_0x2f87be(0x222)](_0x2f87be(0x231)),selectY=d3[_0x2f87be(0x222)](_0x2f87be(0x228)),names=data[_0x2f87be(0x1e3)](function(_0x131130){return _0x131130[0x1];});header[_0x2f87be(0x251)](0x3)[_0x2f87be(0x26e)](function(_0x40383d){var _0x4f83a2=_0x2f87be;selectX['append'](_0x4f83a2(0x25b))['text'](_0x40383d)[_0x4f83a2(0x1eb)](_0x4f83a2(0x247),_0x40383d),selectY[_0x4f83a2(0x1dc)](_0x4f83a2(0x25b))[_0x4f83a2(0x281)](_0x40383d)['attr'](_0x4f83a2(0x247),_0x40383d);}),selectX[_0x2f87be(0x27a)](_0x2f87be(0x247),header[0x3]),selectY[_0x2f87be(0x27a)](_0x2f87be(0x247),header[0x4]);var svg=d3[_0x2f87be(0x222)](_0x2f87be(0x1cc))[_0x2f87be(0x1eb)]('width',width+margin[_0x2f87be(0x206)]+margin[_0x2f87be(0x227)])[_0x2f87be(0x1eb)](_0x2f87be(0x22b),height+margin[_0x2f87be(0x1d0)]+margin[_0x2f87be(0x287)])['append']('g')['attr']('transform','translate('+margin[_0x2f87be(0x206)]+','+margin[_0x2f87be(0x1d0)]+')'),xMetric=header[0x3],yMetric=header[0x4],xScale=d3['scaleLinear']()[_0x2f87be(0x26d)]([0x0,width]),yScale=d3['scaleLinear']()['range']([height,0x0]),xAxis=d3[_0x2f87be(0x26b)](xScale)[_0x2f87be(0x23b)](0x0),yAxis=d3[_0x2f87be(0x1d3)](yScale)[_0x2f87be(0x23b)](0x0),gXAxis=svg[_0x2f87be(0x1dc)]('g')[_0x2f87be(0x1eb)](_0x2f87be(0x268),_0x2f87be(0x1d9))[_0x2f87be(0x1eb)](_0x2f87be(0x1f1),_0x2f87be(0x1c2)+height+')'),gYAxis=svg[_0x2f87be(0x1dc)]('g')[_0x2f87be(0x1eb)](_0x2f87be(0x268),_0x2f87be(0x226)),xLabel=svg[_0x2f87be(0x1dc)](_0x2f87be(0x281))['attr'](_0x2f87be(0x268),_0x2f87be(0x1bf))[_0x2f87be(0x1eb)](_0x2f87be(0x260),'end')[_0x2f87be(0x1eb)]('x',width)[_0x2f87be(0x1eb)]('y',height+0x23)['style'](_0x2f87be(0x250),_0x2f87be(0x277))[_0x2f87be(0x21d)](_0x2f87be(0x1e5),_0x2f87be(0x1d5)),yLabel=svg['append'](_0x2f87be(0x281))[_0x2f87be(0x1eb)](_0x2f87be(0x268),_0x2f87be(0x258))[_0x2f87be(0x1eb)](_0x2f87be(0x260),_0x2f87be(0x24b))['attr']('transform','rotate(-90)')[_0x2f87be(0x1eb)]('y',-0x35)['attr']('x',0x0)['style'](_0x2f87be(0x250),'Inter,\x20sans-serif')[_0x2f87be(0x21d)]('font-size','14px'),tooltip=d3[_0x2f87be(0x222)](_0x2f87be(0x1de))[_0x2f87be(0x1dc)](_0x2f87be(0x269))[_0x2f87be(0x1eb)](_0x2f87be(0x268),_0x2f87be(0x27d));function isMobileDevice(){var _0xd256cb=_0x2f87be;return window[_0xd256cb(0x1da)]<=0x300;}function positionTooltip(_0x2f69e4,_0x4ea058){var _0x3b7fa0=_0x2f87be;const _0x589ba0=_0x4ea058[_0x3b7fa0(0x1d7)]();if(!_0x589ba0)return{'left':0x0,'top':0x0};const _0x2893c6=_0x589ba0[_0x3b7fa0(0x21e)](),_0x1211ec=window[_0x3b7fa0(0x1da)],_0x44f9fe=window[_0x3b7fa0(0x224)];let _0x1882a3=_0x2f69e4[_0x3b7fa0(0x25c)]+0xa,_0x494c11=_0x2f69e4[_0x3b7fa0(0x1cb)]-0x1c;return _0x1882a3+_0x2893c6[_0x3b7fa0(0x278)]>_0x1211ec-0xa&&(_0x1882a3=_0x2f69e4[_0x3b7fa0(0x25c)]-_0x2893c6[_0x3b7fa0(0x278)]-0xa),_0x494c11+_0x2893c6[_0x3b7fa0(0x22b)]>_0x44f9fe-0xa&&(_0x494c11=_0x2f69e4['pageY']-_0x2893c6[_0x3b7fa0(0x22b)]-0xa),_0x1882a3=Math[_0x3b7fa0(0x23f)](0xa,_0x1882a3),_0x494c11=Math[_0x3b7fa0(0x23f)](0xa,_0x494c11),{'left':_0x1882a3,'top':_0x494c11};}var clickedCircles=[],filteredData=data,filteredNames=names,circles;function updateChart(){var _0x475064=_0x2f87be;updateChartDimensions(),d3[_0x475064(0x222)]('#scatter-plot')[_0x475064(0x1eb)](_0x475064(0x278),width+margin[_0x475064(0x206)]+margin[_0x475064(0x227)])[_0x475064(0x1eb)]('height',height+margin[_0x475064(0x1d0)]+margin['bottom']),gXAxis['attr']('transform',_0x475064(0x1c2)+height+')'),xLabel[_0x475064(0x1eb)]('x',width)[_0x475064(0x1eb)]('y',height+0x23),yLabel['attr']('x',0x0);const _0x2811f0=document[_0x475064(0x1de)][_0x475064(0x26f)]['contains'](_0x475064(0x201));var _0x3024e1=document['getElementById']('select-league')[_0x475064(0x247)];if(_0x3024e1==='all')filteredData=data;else _0x3024e1==='Top\x205\x20Leagues'?filteredData=data[_0x475064(0x1ff)](function(_0x27d812){var _0xa16c71=_0x475064;return _0x27d812[0x2]===_0xa16c71(0x27f)||_0x27d812[0x2]===_0xa16c71(0x24d)||_0x27d812[0x2]===_0xa16c71(0x1dd)||_0x27d812[0x2]===_0xa16c71(0x282)||_0x27d812[0x2]===_0xa16c71(0x225);}):filteredData=data['filter'](function(_0xfc3cc1){return _0xfc3cc1[0x2]===_0x3024e1;});filteredNames=filteredData['map'](function(_0x2e6153){return _0x2e6153[0x1];}),xMetric=selectX['property'](_0x475064(0x247)),yMetric=selectY[_0x475064(0x27a)]('value'),xScale[_0x475064(0x26d)]([0x0,width])[_0x475064(0x1ea)]([d3[_0x475064(0x267)](filteredData,function(_0x1c1bf6){var _0x1c1ebc=_0x475064;return _0x1c1bf6[header[_0x1c1ebc(0x248)](xMetric)]*0.9;}),d3[_0x475064(0x23f)](filteredData,function(_0x25134a){return _0x25134a[header['indexOf'](xMetric)]*1.1;})]),yScale[_0x475064(0x26d)]([height,0x0])[_0x475064(0x1ea)]([d3[_0x475064(0x267)](filteredData,function(_0x5bd614){var _0x549ccd=_0x475064;return _0x5bd614[header[_0x549ccd(0x248)](yMetric)]*0.9;}),d3[_0x475064(0x23f)](filteredData,function(_0x30c5bf){var _0x21daaa=_0x475064;return _0x30c5bf[header[_0x21daaa(0x248)](yMetric)]*1.1;})]),gXAxis[_0x475064(0x1f4)](d3['axisBottom'](xScale)[_0x475064(0x23b)](0x0)),gYAxis['call'](d3[_0x475064(0x1d3)](yScale)[_0x475064(0x23b)](0x0));const _0x16c9ae='metrics.'+xMetric[_0x475064(0x23d)]()[_0x475064(0x208)](/ /g,'-')[_0x475064(0x208)](/%/g,'pct'),_0xaf34e2='metrics.'+yMetric[_0x475064(0x23d)]()[_0x475064(0x208)](/ /g,'-')[_0x475064(0x208)](/%/g,_0x475064(0x20b));xLabel[_0x475064(0x1eb)](_0x475064(0x221),_0x16c9ae),yLabel[_0x475064(0x1eb)](_0x475064(0x221),_0xaf34e2);if(window['currentTranslations']&&window[_0x475064(0x242)][_0x475064(0x244)]){const _0x582a64=xMetric[_0x475064(0x23d)]()[_0x475064(0x208)](/ /g,'-')['replace'](/%/g,'pct'),_0x46b7c5=yMetric[_0x475064(0x23d)]()[_0x475064(0x208)](/ /g,'-')['replace'](/%/g,_0x475064(0x20b)),_0x2d3e3c=window['currentTranslations'][_0x475064(0x244)][_0x582a64],_0x2750b5=window[_0x475064(0x242)][_0x475064(0x244)][_0x46b7c5];xLabel[_0x475064(0x281)](_0x2d3e3c||xMetric),yLabel[_0x475064(0x281)](_0x2750b5||yMetric);}else xLabel[_0x475064(0x281)](xMetric),yLabel[_0x475064(0x281)](yMetric);svg[_0x475064(0x1ef)](_0x475064(0x214))[_0x475064(0x273)](),svg[_0x475064(0x1ef)](_0x475064(0x220))[_0x475064(0x273)](),svg['selectAll'](_0x475064(0x1c1))[_0x475064(0x273)](),svg['selectAll'](_0x475064(0x202))[_0x475064(0x273)](),svg[_0x475064(0x1ef)]('.xy-line-label')[_0x475064(0x273)](),svg[_0x475064(0x1ef)](_0x475064(0x27c))[_0x475064(0x273)](),svg['selectAll'](_0x475064(0x283))['remove'](),svg[_0x475064(0x1ef)](_0x475064(0x1c6))['remove'](),svg[_0x475064(0x1ef)]('marker#arrow-over,\x20marker#arrow-under')['remove'](),svg[_0x475064(0x1ef)](_0x475064(0x1d6))[_0x475064(0x273)](),svg['selectAll']('.median-line')[_0x475064(0x273)]();if(xMetric===_0x475064(0x241)&&yMetric===_0x475064(0x239)||xMetric==='Goals\x20per\x2090'&&yMetric===_0x475064(0x241)){var _0x30862e=null,_0x36ed4d=d3[_0x475064(0x267)](filteredData,function(_0x4c4e77){return _0x4c4e77[header['indexOf'](xMetric)];}),_0x4a375d=d3[_0x475064(0x23f)](filteredData,function(_0x17fc31){var _0x48497e=_0x475064;return _0x17fc31[header[_0x48497e(0x248)](xMetric)];}),_0x143d71=d3[_0x475064(0x267)](filteredData,function(_0x8b74bd){var _0x48d4ec=_0x475064;return _0x8b74bd[header[_0x48d4ec(0x248)](yMetric)];}),_0x5e5f29=d3[_0x475064(0x23f)](filteredData,function(_0x58eb9f){var _0x59ab2c=_0x475064;return _0x58eb9f[header[_0x59ab2c(0x248)](yMetric)];}),_0x5cc7f4=Math[_0x475064(0x267)](_0x4a375d,_0x5e5f29),_0x2e526d=Math[_0x475064(0x23f)](_0x36ed4d,_0x143d71);svg['append'](_0x475064(0x24f))[_0x475064(0x1eb)](_0x475064(0x268),'xy-line')[_0x475064(0x1eb)]('x1',xScale(_0x2e526d))['attr']('y1',yScale(_0x2e526d))['attr']('x2',xScale(_0x5cc7f4))['attr']('y2',yScale(_0x5cc7f4))[_0x475064(0x21d)](_0x475064(0x216),_0x475064(0x22a))[_0x475064(0x21d)](_0x475064(0x1ed),'2')[_0x475064(0x21d)]('stroke-dasharray',_0x475064(0x217)),svg[_0x475064(0x1dc)](_0x475064(0x24f))[_0x475064(0x1eb)](_0x475064(0x268),'xy-line-hover')['attr']('x1',xScale(_0x2e526d))[_0x475064(0x1eb)]('y1',yScale(_0x2e526d))[_0x475064(0x1eb)]('x2',xScale(_0x5cc7f4))['attr']('y2',yScale(_0x5cc7f4))['style'](_0x475064(0x216),'transparent')[_0x475064(0x21d)](_0x475064(0x1ed),'15')[_0x475064(0x21d)](_0x475064(0x1d1),_0x475064(0x205))['on'](_0x475064(0x24c),function(){var _0x3b0a12=_0x475064;_0x30862e&&clearTimeout(_0x30862e);var _0x13c9a9=d3[_0x3b0a12(0x24e)]['pageX'],_0x4eeddc=d3[_0x3b0a12(0x24e)][_0x3b0a12(0x1cb)];_0x30862e=setTimeout(function(){var _0x28562a=_0x3b0a12;tooltip[_0x28562a(0x257)]()[_0x28562a(0x23c)](0xc8)[_0x28562a(0x21d)](_0x28562a(0x213),0.9);var _0x3e29b2='<strong>'+getTranslation(_0x28562a(0x24a),_0x28562a(0x259))+'</strong><br/>';xMetric===_0x28562a(0x241)&&yMetric===_0x28562a(0x239)?_0x3e29b2+=_0x28562a(0x232)+getTranslation(_0x28562a(0x243),_0x28562a(0x1e2))+_0x28562a(0x1fc)+_0x28562a(0x232)+getTranslation(_0x28562a(0x1f6),'Teams\x20below\x20this\x20line\x20are\x20scoring\x20fewer\x20goals\x20than\x20expected.')+_0x28562a(0x1e9):_0x3e29b2+='<span>'+getTranslation(_0x28562a(0x1c9),'Teams\x20right\x20of\x20this\x20line\x20are\x20scoring\x20more\x20goals\x20than\x20expected.')+'</span><br/>'+_0x28562a(0x232)+getTranslation(_0x28562a(0x203),_0x28562a(0x246))+_0x28562a(0x1e9),tooltip[_0x28562a(0x284)](_0x3e29b2)[_0x28562a(0x21d)]('left',_0x13c9a9+0xa+'px')[_0x28562a(0x21d)]('top',_0x4eeddc-0x1c+'px');},0x258);})['on'](_0x475064(0x207),function(){var _0x594090=_0x475064;_0x30862e&&(clearTimeout(_0x30862e),_0x30862e=null),tooltip[_0x594090(0x257)]()[_0x594090(0x23c)](0x1f4)[_0x594090(0x21d)](_0x594090(0x213),0x0);});}if(medianLinesVisible){var _0x1b098e=d3[_0x475064(0x25e)](filteredData,function(_0x574c6e){return _0x574c6e[header['indexOf'](xMetric)];}),_0x327484=d3[_0x475064(0x25e)](filteredData,function(_0x3c8ed2){return _0x3c8ed2[header['indexOf'](yMetric)];});svg[_0x475064(0x1dc)](_0x475064(0x24f))[_0x475064(0x1eb)](_0x475064(0x268),_0x475064(0x230))['attr']('x1',xScale(_0x1b098e))[_0x475064(0x1eb)]('y1',0x0)[_0x475064(0x1eb)]('x2',xScale(_0x1b098e))['attr']('y2',height)[_0x475064(0x21d)](_0x475064(0x216),_0x475064(0x264))['style']('stroke-dasharray','4'),svg[_0x475064(0x1dc)](_0x475064(0x24f))['attr']('class',_0x475064(0x230))[_0x475064(0x1eb)]('x1',0x0)[_0x475064(0x1eb)]('y1',yScale(_0x327484))['attr']('x2',width)[_0x475064(0x1eb)]('y2',yScale(_0x327484))['style'](_0x475064(0x216),'rgba(0,\x200,\x200,\x200.3)')[_0x475064(0x21d)](_0x475064(0x1f3),'4');}circles=svg[_0x475064(0x1ef)](_0x475064(0x214))[_0x475064(0x275)](filteredData)[_0x475064(0x1ce)]()[_0x475064(0x1dc)](_0x475064(0x214))['attr']('cx',function(_0x2aaaab){return xScale(_0x2aaaab[header['indexOf'](xMetric)]);})['attr']('cy',function(_0x3f027c){var _0x24adf4=_0x475064;return yScale(_0x3f027c[header[_0x24adf4(0x248)](yMetric)]);})[_0x475064(0x1eb)]('r',0x8)[_0x475064(0x21d)](_0x475064(0x1d4),function(_0x3f6eb9){var _0x1fb0f1=_0x475064;if(clickedCircles[_0x1fb0f1(0x25d)](_0x3f6eb9[0x1]))return getLeagueColor(_0x3f6eb9[0x2]);return _0x1fb0f1(0x1cf);})['style'](_0x475064(0x216),function(_0x502a99){var _0x456e42=_0x475064;return clickedCircles[_0x456e42(0x25d)](_0x502a99[0x1])?_0x456e42(0x1fe):_0x456e42(0x266);})['style']('stroke-width',function(_0x770675){return clickedCircles['includes'](_0x770675[0x1])?0x2:0x0;})[_0x475064(0x21d)](_0x475064(0x1d1),_0x475064(0x1e0))['on'](_0x475064(0x24c),function(_0x194711){var _0x3bc622=_0x475064;d3[_0x3bc622(0x222)](this)[_0x3bc622(0x257)]()[_0x3bc622(0x23c)](0xc8)[_0x3bc622(0x1eb)]('r',0xa)[_0x3bc622(0x21d)](_0x3bc622(0x1d4),getLeagueColor(_0x194711[0x2])),tooltip[_0x3bc622(0x257)]()[_0x3bc622(0x23c)](0xc8)['style'](_0x3bc622(0x213),0.9);const _0x51c2a1=_0x3bc622(0x1cd)+xMetric[_0x3bc622(0x23d)]()[_0x3bc622(0x208)](/ /g,'-')['replace'](/%/g,'pct'),_0x2834cd=_0x3bc622(0x1cd)+yMetric[_0x3bc622(0x23d)]()[_0x3bc622(0x208)](/ /g,'-')[_0x3bc622(0x208)](/%/g,_0x3bc622(0x20b)),_0x437b78=getTranslation(_0x51c2a1,xMetric),_0xc85f35=getTranslation(_0x2834cd,yMetric);tooltip['html'](_0x3bc622(0x274)+_0x194711[0x1]+'</strong><br/>'+_0x437b78+':\x20'+_0x194711[header[_0x3bc622(0x248)](xMetric)][_0x3bc622(0x261)](0x2)+_0x3bc622(0x254)+_0xc85f35+':\x20'+_0x194711[header[_0x3bc622(0x248)](yMetric)][_0x3bc622(0x261)](0x2));const _0x252d37=tooltip['node']();if(_0x252d37){const _0x442df3=_0x252d37['getBoundingClientRect'](),_0x43dd47=window[_0x3bc622(0x1da)],_0x2ecc6d=window[_0x3bc622(0x224)];let _0x377365=d3['event'][_0x3bc622(0x25c)]+0xa,_0x3faaaf=d3[_0x3bc622(0x24e)]['pageY']-0x1c;_0x377365+_0x442df3[_0x3bc622(0x278)]>_0x43dd47-0xa&&(_0x377365=d3['event']['pageX']-_0x442df3[_0x3bc622(0x278)]-0xa),_0x3faaaf+_0x442df3[_0x3bc622(0x22b)]>_0x2ecc6d-0xa&&(_0x3faaaf=d3[_0x3bc622(0x24e)]['pageY']-_0x442df3['height']-0xa),_0x377365=Math[_0x3bc622(0x23f)](0xa,_0x377365),_0x3faaaf=Math['max'](0xa,_0x3faaaf),tooltip[_0x3bc622(0x21d)]('left',_0x377365+'px')['style'](_0x3bc622(0x1d0),_0x3faaaf+'px');}else tooltip[_0x3bc622(0x21d)](_0x3bc622(0x206),d3['event'][_0x3bc622(0x25c)]+0xa+'px')[_0x3bc622(0x21d)](_0x3bc622(0x1d0),d3[_0x3bc622(0x24e)]['pageY']-0x1c+'px');window[_0x3bc622(0x1da)]<=0x300&&setTimeout(function(){var _0x4b64d2=_0x3bc622;tooltip[_0x4b64d2(0x257)]()['duration'](0xc8)[_0x4b64d2(0x21d)](_0x4b64d2(0x213),0x0);},0x3e8);})['on'](_0x475064(0x207),function(_0x4df1c8){var _0x30d201=_0x475064;window['innerWidth']>0x300&&tooltip[_0x30d201(0x257)]()['duration'](0x1f4)[_0x30d201(0x21d)](_0x30d201(0x213),0x0);var _0x5a86b3=clickedCircles[_0x30d201(0x25d)](_0x4df1c8[0x1]);d3[_0x30d201(0x222)](this)[_0x30d201(0x257)]()[_0x30d201(0x23c)](0xc8)[_0x30d201(0x1eb)]('r',0x8)['style']('fill',function(){var _0x54ff3d=_0x30d201;return _0x5a86b3?getLeagueColor(_0x4df1c8[0x2]):_0x54ff3d(0x1cf);});})['on']('click',function(_0x4b1ab9){var _0x17130f=_0x475064,_0x37967f=d3[_0x17130f(0x222)](this)[_0x17130f(0x26a)](_0x17130f(0x1f7));_0x37967f&&resetSearch();var _0x118383=clickedCircles[_0x17130f(0x248)](_0x4b1ab9[0x1]);_0x118383===-0x1?(clickedCircles[_0x17130f(0x1c7)](_0x4b1ab9[0x1]),d3['select'](this)[_0x17130f(0x21d)](_0x17130f(0x1d4),getLeagueColor(_0x4b1ab9[0x2]))[_0x17130f(0x21d)](_0x17130f(0x216),'#000')[_0x17130f(0x21d)](_0x17130f(0x1ed),0x2),addTeamLabel(_0x4b1ab9)):(clickedCircles['splice'](_0x118383,0x1),d3['select'](this)['style'](_0x17130f(0x1d4),_0x17130f(0x1cf))[_0x17130f(0x21d)](_0x17130f(0x216),'none'),svg[_0x17130f(0x1ef)](_0x17130f(0x1f9)+_0x4b1ab9[0x1][_0x17130f(0x208)](/\s+/g,'-')[_0x17130f(0x23d)]())[_0x17130f(0x273)]());updateSelectAllButtonText();var _0x27882f=document[_0x17130f(0x1df)](_0x17130f(0x286))[_0x17130f(0x247)];updateLeagueLegend(_0x27882f);}),clickedCircles[_0x475064(0x26e)](function(_0x10c176){var _0x32a267=_0x475064,_0x4cbf7e=filteredData[_0x32a267(0x27e)](function(_0x2740af){return _0x2740af[0x1]===_0x10c176;});_0x4cbf7e&&addTeamLabel(_0x4cbf7e);}),updateSelectAllButtonText(),updateLeagueLegend(_0x3024e1);}function updateSelectAllButtonText(){var _0x42c646=_0x2f87be,_0x2fabac=document[_0x42c646(0x1df)]('select-icon'),_0x549d9f=document[_0x42c646(0x1df)](_0x42c646(0x1ca)),_0x3e1d3c=filteredData[_0x42c646(0x240)](function(_0x5c1729){var _0x59b64=_0x42c646;return clickedCircles[_0x59b64(0x25d)](_0x5c1729[0x1]);});_0x3e1d3c?(_0x2fabac[_0x42c646(0x1f8)]=_0x42c646(0x21f),_0x549d9f&&(window[_0x42c646(0x242)]&&window[_0x42c646(0x242)][_0x42c646(0x27d)]?_0x549d9f[_0x42c646(0x1c4)]=window[_0x42c646(0x242)]['tooltip'][_0x42c646(0x26c)]||_0x42c646(0x262):_0x549d9f[_0x42c646(0x1c4)]=_0x42c646(0x262))):(_0x2fabac[_0x42c646(0x1f8)]=_0x42c646(0x23a),_0x549d9f&&(window[_0x42c646(0x242)]&&window[_0x42c646(0x242)][_0x42c646(0x27d)]?_0x549d9f[_0x42c646(0x1c4)]=window[_0x42c646(0x242)][_0x42c646(0x27d)]['selectAll']||_0x42c646(0x219):_0x549d9f[_0x42c646(0x1c4)]=_0x42c646(0x219)));}function _0x5473(){var _0x249e72=['addEventListener','ID,Player,Top\x207\x20Leagues,Goals\x20per\x2090,xG\x20per\x2090,Shots\x20on\x20target\x20per\x2090,Shots\x20on\x20target\x20%,Passes\x20completed,Pass\x20accuracy\x20%,Possession\x20%,Positional\x20attacks\x20per\x2090,Counter\x20attacks\x20per\x2090,Touches\x20in\x20the\x20box\x20per\x2090,Goals\x20conceded\x20per\x2090,SoT\x20against\x20per\x2090,Defensive\x20duels\x20per\x2090,Defensive\x20duel\x20%,Aerial\x20duels\x20per\x2090,Aerial\x20duels\x20%,Passes\x20per\x20possession,PPDA\x0a','</span><br/>','send','#000','filter','rgba(255,\x20165,\x200,\x200.7)','dark-mode','.xy-line-bg','tooltip.xg-line-left','getBBox','help','left','mouseout','replace','NFD','span','pct','clientWidth','search-bar','each','querySelectorAll','font-weight','createElement','500','opacity','circle','legend-item','stroke','5,3','16441870UqQQoF','Select\x20all\x20teams','team-label\x20','Show\x20median\x20lines','106qodCyc','style','getBoundingClientRect','ion-ios-circle-outline','.team-label','data-i18n','select','input','innerHeight','Ligue\x201','y-axis','right','#select-y','length','#2ecc71','height','GET','bold','search-dimmed','backgroundColor','median-line','#select-x','<span>','2040222tsbnrl','rgba(255,\x200,\x200,\x200.7)','size','.position-btn','add','rgba(75,\x200,\x20130,\x200.7)','Goals\x20per\x2090','ion-ios-circle-filled','tickSize','duration','toLowerCase','10561oIzQmQ','max','every','xG\x20per\x2090','currentTranslations','tooltip.xg-line-above','metrics','innerHTML','Teams\x20left\x20of\x20this\x20line\x20are\x20scoring\x20fewer\x20goals\x20than\x20expected.','value','indexOf','4119740EocVMv','tooltip.xg-line-title','end','mouseover','La\x20Liga','event','line','font-family','slice','8UZEYZg','split','<br/>','change','trim','transition','y-label','G\x20=\x20xG\x20Line','interrupt','option','pageX','includes','median','name','text-anchor','toFixed','Unselect\x20all\x20teams','2796yULPSZ','rgba(0,\x200,\x200,\x200.3)','href','none','min','class','div','classed','axisBottom','unselectAll','range','forEach','classList','.chart-container','normalize','5392mPONqP','remove','<strong>','data','rgba(255,\x20255,\x200,\x200.7)','Inter,\x20sans-serif','width','querySelector','property','.chart-wrapper','.xy-line-label-bg','tooltip','find','Premier\x20League','responseText','text','Serie\x20A','.performance-label','html','block','select-league','bottom','median-lines-tooltip','x-label','open','.xy-line','translate(0,','all','textContent','legend-color','linearGradient#line-gradient','push','3305960ifALtM','tooltip.xg-line-right','select-all-tooltip','pageY','#scatter-plot','metrics.','enter','rgba(70,\x20130,\x20180,\x200.7)','top','cursor','Top\x205\x20Leagues','axisLeft','fill','14px','.xy-line-hover','node','resizeTimer','x-axis','innerWidth','12px','append','Bundesliga','body','getElementById','pointer','1999665ZsYdjS','Teams\x20above\x20this\x20line\x20are\x20scoring\x20more\x20goals\x20than\x20expected.','map','click','font-size','Hide\x20median\x20lines','display','apply','</span>','domain','attr','resize','stroke-width','active','selectAll','link','transform','appendChild','stroke-dasharray','call','flex','tooltip.xg-line-below','search-match','className','.team-label-'];_0x5473=function(){return _0x249e72;};return _0x5473();}selectX['on'](_0x2f87be(0x255),updateChart),selectY['on'](_0x2f87be(0x255),updateChart);function removeSpecialCharsAndDiacritics(_0x17bd18){var _0x1fc4a7=_0x2f87be;if(!_0x17bd18)return'';return _0x17bd18[_0x1fc4a7(0x271)](_0x1fc4a7(0x209))[_0x1fc4a7(0x208)](/[\u0300-\u036f]/g,'')['replace'](/Ø/g,'O')[_0x1fc4a7(0x208)](/ø/g,'o');}var searchBar=document['getElementById'](_0x2f87be(0x20d));searchBar[_0x2f87be(0x1fa)](_0x2f87be(0x223),function(){var _0x115439=_0x2f87be,_0x273b7f=searchBar['value'][_0x115439(0x23d)]();if(_0x273b7f===''){resetSearch();return;}var _0x1ace32=removeSpecialCharsAndDiacritics(_0x273b7f);svg[_0x115439(0x1ef)](_0x115439(0x214))['classed']('search-match',![])[_0x115439(0x21d)]('fill',function(_0x4804f0){var _0x1f3d75=_0x115439;return clickedCircles['includes'](_0x4804f0[0x1])?getLeagueColor(_0x4804f0[0x2]):_0x1f3d75(0x1cf);})[_0x115439(0x21d)](_0x115439(0x216),function(_0x1862d3){var _0x39f8fb=_0x115439;return clickedCircles[_0x39f8fb(0x25d)](_0x1862d3[0x1])?_0x39f8fb(0x1fe):_0x39f8fb(0x266);})[_0x115439(0x21d)](_0x115439(0x1ed),function(_0x6924aa){var _0x3d7cb0=_0x115439;return clickedCircles[_0x3d7cb0(0x25d)](_0x6924aa[0x1])?0x2:0x0;})[_0x115439(0x21d)](_0x115439(0x1ff),'none')[_0x115439(0x20e)](function(){var _0x5842c4=_0x115439;d3[_0x5842c4(0x222)](this)['style']('r',null);}),svg[_0x115439(0x1ef)](_0x115439(0x220))[_0x115439(0x26a)](_0x115439(0x1f7),![])[_0x115439(0x26a)](_0x115439(0x22e),![]);var _0x1c0e4e=[];svg[_0x115439(0x1ef)]('circle')[_0x115439(0x1ff)](function(_0x27be45){var _0x51dcaa=_0x115439,_0x305231=_0x27be45[0x1]['toLowerCase'](),_0x29150c=removeSpecialCharsAndDiacritics(_0x305231),_0x66735f=_0x305231[_0x51dcaa(0x25d)](_0x273b7f)||_0x29150c[_0x51dcaa(0x25d)](_0x1ace32);return _0x66735f&&_0x1c0e4e[_0x51dcaa(0x1c7)](_0x27be45[0x1]),_0x66735f;})[_0x115439(0x26a)](_0x115439(0x1f7),!![])['each'](function(){this['parentNode']['appendChild'](this);}),_0x1c0e4e['length']>0x0?(svg[_0x115439(0x1ef)]('.team-label')[_0x115439(0x26a)](_0x115439(0x22e),!![]),svg[_0x115439(0x1ef)]('.team-label')['filter'](function(){var _0x360f6a=_0x115439,_0x38d636=d3[_0x360f6a(0x222)](this)[_0x360f6a(0x281)]();return _0x1c0e4e[_0x360f6a(0x25d)](_0x38d636);})['classed']('search-match',!![])[_0x115439(0x26a)](_0x115439(0x22e),![])[_0x115439(0x20e)](function(){var _0x5c3afb=_0x115439;this['parentNode'][_0x5c3afb(0x1f2)](this);}),_0x1c0e4e[_0x115439(0x26e)](function(_0x1b2151){var _0x364904=_0x115439,_0x172f0b='team-label-'+_0x1b2151[_0x364904(0x208)](/\s+/g,'-')[_0x364904(0x23d)]();if(svg[_0x364904(0x222)]('.'+_0x172f0b)[_0x364904(0x235)]()===0x0){var _0xaae478=filteredData[_0x364904(0x27e)](function(_0x4e1045){return _0x4e1045[0x1]===_0x1b2151;});_0xaae478&&(addTeamLabel(_0xaae478),svg[_0x364904(0x222)]('.'+_0x172f0b)['classed'](_0x364904(0x1f7),!![]));}})):(svg[_0x115439(0x1ef)](_0x115439(0x220))['each'](function(){var _0xbc2f69=_0x115439,_0xdcda26=d3[_0xbc2f69(0x222)](this),_0x2fbf76=_0xdcda26[_0xbc2f69(0x281)]();!clickedCircles[_0xbc2f69(0x25d)](_0x2fbf76)&&_0xdcda26[_0xbc2f69(0x273)]();}),svg[_0x115439(0x1ef)](_0x115439(0x214))[_0x115439(0x21d)](_0x115439(0x1d4),function(_0x2dafcb){var _0x10d112=_0x115439;return clickedCircles['includes'](_0x2dafcb[0x1])?getLeagueColor(_0x2dafcb[0x2]):_0x10d112(0x1cf);})[_0x115439(0x21d)]('stroke',function(_0x109dcd){var _0x489d1a=_0x115439;return clickedCircles[_0x489d1a(0x25d)](_0x109dcd[0x1])?_0x489d1a(0x1fe):_0x489d1a(0x266);})[_0x115439(0x21d)]('stroke-width',function(_0x4eea02){var _0x438aac=_0x115439;return clickedCircles[_0x438aac(0x25d)](_0x4eea02[0x1])?0x2:0x0;}));});function resetSearch(){var _0x4c599e=_0x2f87be;searchBar[_0x4c599e(0x247)]='',svg[_0x4c599e(0x1ef)](_0x4c599e(0x214))[_0x4c599e(0x26a)](_0x4c599e(0x1f7),![])[_0x4c599e(0x21d)](_0x4c599e(0x1d4),function(_0x1b2967){return clickedCircles['includes'](_0x1b2967[0x1])?getLeagueColor(_0x1b2967[0x2]):'rgba(70,\x20130,\x20180,\x200.7)';})['style'](_0x4c599e(0x216),function(_0x10bd53){var _0x18a4c5=_0x4c599e;return clickedCircles[_0x18a4c5(0x25d)](_0x10bd53[0x1])?_0x18a4c5(0x1fe):_0x18a4c5(0x266);})['style'](_0x4c599e(0x1ed),function(_0x3fbbc2){return clickedCircles['includes'](_0x3fbbc2[0x1])?0x2:0x0;})[_0x4c599e(0x21d)]('filter',_0x4c599e(0x266))['each'](function(){var _0x448544=_0x4c599e;d3[_0x448544(0x222)](this)['style']('r',null),d3['select'](this)[_0x448544(0x25a)]();}),svg[_0x4c599e(0x1ef)](_0x4c599e(0x220))['classed']('search-match',![])[_0x4c599e(0x26a)](_0x4c599e(0x22e),![])[_0x4c599e(0x20e)](function(){var _0x4e64f2=_0x4c599e;d3[_0x4e64f2(0x222)](this)[_0x4e64f2(0x25a)]();}),svg['selectAll'](_0x4c599e(0x220))[_0x4c599e(0x20e)](function(){var _0x57ab8b=_0x4c599e,_0x1cd3f9=d3['select'](this),_0x39efb2=_0x1cd3f9[_0x57ab8b(0x281)]();!clickedCircles['includes'](_0x39efb2)&&_0x1cd3f9[_0x57ab8b(0x273)]();});}function _0x37d9(_0x1a2756,_0xdf076e){var _0x54738b=_0x5473();return _0x37d9=function(_0x37d903,_0x54361a){_0x37d903=_0x37d903-0x1be;var _0x19a49e=_0x54738b[_0x37d903];return _0x19a49e;},_0x37d9(_0x1a2756,_0xdf076e);}var toggleButton=document[_0x2f87be(0x1df)]('toggle-median-lines');toggleButton[_0x2f87be(0x1fa)](_0x2f87be(0x1e4),function(){var _0x272bf3=_0x2f87be;medianLinesVisible=!medianLinesVisible,updateChart();const _0x23b87=document['getElementById'](_0x272bf3(0x1be));window[_0x272bf3(0x242)]&&window[_0x272bf3(0x242)][_0x272bf3(0x27d)]?_0x23b87[_0x272bf3(0x1c4)]=medianLinesVisible?window['currentTranslations']['tooltip']['hideMedianLines']||'Hide\x20median\x20lines':window[_0x272bf3(0x242)][_0x272bf3(0x27d)]['showMedianLines']||'Show\x20median\x20lines':_0x23b87[_0x272bf3(0x1c4)]=medianLinesVisible?'Hide\x20median\x20lines':_0x272bf3(0x21b);});function selectAllCircles(){var _0x32f483=_0x2f87be,_0x3b6d6a=filteredData['every'](function(_0x42c963){var _0x3b4bfc=_0x37d9;return clickedCircles[_0x3b4bfc(0x25d)](_0x42c963[0x1]);});_0x3b6d6a?(clickedCircles=[],svg[_0x32f483(0x1ef)](_0x32f483(0x214))[_0x32f483(0x21d)](_0x32f483(0x1d4),_0x32f483(0x1cf))[_0x32f483(0x21d)]('stroke','none'),svg[_0x32f483(0x1ef)](_0x32f483(0x220))[_0x32f483(0x273)]()):(svg[_0x32f483(0x1ef)]('circle')[_0x32f483(0x20e)](function(_0x1d88e7){var _0x5c5b58=_0x32f483;!clickedCircles[_0x5c5b58(0x25d)](_0x1d88e7[0x1])&&(clickedCircles[_0x5c5b58(0x1c7)](_0x1d88e7[0x1]),d3[_0x5c5b58(0x222)](this)[_0x5c5b58(0x21d)](_0x5c5b58(0x1d4),getLeagueColor(_0x1d88e7[0x2]))[_0x5c5b58(0x21d)]('stroke','#000')[_0x5c5b58(0x21d)](_0x5c5b58(0x1ed),0x2));}),filteredData[_0x32f483(0x26e)](function(_0x68ca3f){addTeamLabel(_0x68ca3f);}));updateSelectAllButtonText();var _0x42ca19=document['getElementById'](_0x32f483(0x286))['value'];updateLeagueLegend(_0x42ca19);}document[_0x2f87be(0x20f)](_0x2f87be(0x236))['forEach'](_0x3ca0c5=>{var _0x32636f=_0x2f87be;_0x3ca0c5[_0x32636f(0x1fa)](_0x32636f(0x1e4),function(){var _0x3b7b42=_0x32636f;document[_0x3b7b42(0x20f)](_0x3b7b42(0x236))[_0x3b7b42(0x26e)](_0x462708=>_0x462708[_0x3b7b42(0x26f)][_0x3b7b42(0x273)](_0x3b7b42(0x1ee))),this[_0x3b7b42(0x26f)][_0x3b7b42(0x237)]('active'),updateChart();});}),updateChart(),initializeCustomSelectors();function updateLeagueLegend(_0x26a748){var _0x2a80dd=_0x2f87be,_0x2ea6a0=document[_0x2a80dd(0x1df)]('league-legend');if(_0x26a748!==_0x2a80dd(0x1c3)&&_0x26a748!=='Top\x205\x20Leagues'){_0x2ea6a0['style'][_0x2a80dd(0x1e7)]=_0x2a80dd(0x266);return;}if(clickedCircles[_0x2a80dd(0x229)]===0x0){_0x2ea6a0['style'][_0x2a80dd(0x1e7)]=_0x2a80dd(0x266);return;}_0x2ea6a0[_0x2a80dd(0x21d)][_0x2a80dd(0x1e7)]=_0x2a80dd(0x1f5),_0x2ea6a0[_0x2a80dd(0x245)]='';var _0x34c451=document[_0x2a80dd(0x211)]('div');_0x34c451['style']['fontWeight']=_0x2a80dd(0x22d),_0x34c451[_0x2a80dd(0x21d)]['marginRight']='15px',_0x2ea6a0[_0x2a80dd(0x1f2)](_0x34c451);var _0x26118b=[];if(_0x26a748===_0x2a80dd(0x1c3))_0x26118b=Object['keys'](leagueColors);else _0x26a748===_0x2a80dd(0x1d2)&&(_0x26118b=[_0x2a80dd(0x27f),_0x2a80dd(0x24d),_0x2a80dd(0x1dd),_0x2a80dd(0x282),_0x2a80dd(0x225)]);_0x26118b[_0x2a80dd(0x26e)](function(_0x560cd1){var _0x1f42a1=_0x2a80dd,_0x3cddb2=document[_0x1f42a1(0x211)](_0x1f42a1(0x269));_0x3cddb2[_0x1f42a1(0x1f8)]=_0x1f42a1(0x215);var _0x5ce365=document[_0x1f42a1(0x211)](_0x1f42a1(0x269));_0x5ce365[_0x1f42a1(0x1f8)]=_0x1f42a1(0x1c5),_0x5ce365[_0x1f42a1(0x21d)][_0x1f42a1(0x22f)]=leagueColors[_0x560cd1];var _0x5b6a9d=document[_0x1f42a1(0x211)](_0x1f42a1(0x20a));_0x5b6a9d['textContent']=_0x560cd1,_0x3cddb2[_0x1f42a1(0x1f2)](_0x5ce365),_0x3cddb2[_0x1f42a1(0x1f2)](_0x5b6a9d),_0x2ea6a0[_0x1f42a1(0x1f2)](_0x3cddb2);});}const data1=dataLines[_0x2f87be(0x1e3)](_0xb30bf=>{var _0xe17a0f=_0x2f87be;const [_0x372024,_0x20a171]=_0xb30bf[_0xe17a0f(0x253)](',');return{'name':_0x372024,'link':_0x20a171};});function search2(_0x123786){var _0x4790d3=_0x2f87be;autocompleteBox[_0x4790d3(0x245)]='';const _0x21c54c=_0x123786[_0x4790d3(0x23d)](),_0x2747c3=data1['filter'](_0x25420b=>{var _0x53dc9a=_0x4790d3;const _0x1cafd6=_0x25420b[_0x53dc9a(0x25f)]?_0x25420b[_0x53dc9a(0x25f)][_0x53dc9a(0x23d)]():'';return _0x1cafd6[_0x53dc9a(0x25d)](_0x21c54c);});if(_0x2747c3[_0x4790d3(0x229)]===0x0){autocompleteBox[_0x4790d3(0x21d)][_0x4790d3(0x1e7)]=_0x4790d3(0x266);return;}_0x2747c3['forEach'](_0x4e8019=>{var _0x4dd396=_0x4790d3;if(_0x4e8019[_0x4dd396(0x25f)]&&_0x4e8019[_0x4dd396(0x1f0)]){const _0x17e869=document[_0x4dd396(0x211)](_0x4dd396(0x269)),_0x547cf4=document[_0x4dd396(0x211)]('a');_0x547cf4[_0x4dd396(0x265)]=_0x4e8019[_0x4dd396(0x1f0)],_0x547cf4['textContent']=_0x4e8019[_0x4dd396(0x25f)],_0x17e869[_0x4dd396(0x1f2)](_0x547cf4),autocompleteBox[_0x4dd396(0x1f2)](_0x17e869);}}),autocompleteBox[_0x4790d3(0x21d)][_0x4790d3(0x1e7)]=_0x4790d3(0x285);}searchInput[_0x2f87be(0x1fa)](_0x2f87be(0x223),()=>{var _0x5c6206=_0x2f87be;const _0x5b0ac0=searchInput['value'];_0x5b0ac0[_0x5c6206(0x256)]()===''?autocompleteBox[_0x5c6206(0x21d)][_0x5c6206(0x1e7)]='none':search2(_0x5b0ac0);});function addTeamLabel(_0xdaa492){var _0x3a3292=_0x2f87be,_0x5c0eda=xScale(_0xdaa492[header[_0x3a3292(0x248)](xMetric)]),_0x1f30ba=yScale(_0xdaa492[header['indexOf'](yMetric)]),_0x57274a='team-label-'+_0xdaa492[0x1][_0x3a3292(0x208)](/\s+/g,'-')[_0x3a3292(0x23d)]();if(svg[_0x3a3292(0x222)]('.'+_0x57274a)[_0x3a3292(0x235)]()>0x0)return;var _0x391f74=svg[_0x3a3292(0x1dc)](_0x3a3292(0x281))[_0x3a3292(0x1eb)](_0x3a3292(0x268),_0x3a3292(0x21a)+_0x57274a)[_0x3a3292(0x1eb)]('x',_0x5c0eda+0xc)[_0x3a3292(0x1eb)]('y',_0x1f30ba+0x4)['text'](_0xdaa492[0x1])[_0x3a3292(0x21d)]('font-family','Inter,\x20sans-serif')[_0x3a3292(0x21d)](_0x3a3292(0x1e5),_0x3a3292(0x1db))['style'](_0x3a3292(0x210),_0x3a3292(0x212))[_0x3a3292(0x21d)]('fill','#333');positionLabelToAvoidOverlap(_0x391f74,_0x5c0eda,_0x1f30ba);}function positionLabelToAvoidOverlap(_0xf2d437,_0x2e8cbb,_0x157197){var _0x5f47c9=_0x2f87be,_0x30cfd2=svg[_0x5f47c9(0x1ef)](_0x5f47c9(0x220))[_0x5f47c9(0x1ff)](function(){var _0x3b1b6c=_0x5f47c9;return this!==_0xf2d437[_0x3b1b6c(0x1d7)]();}),_0x21be3f=_0xf2d437['node']()[_0x5f47c9(0x204)](),_0x3aa419=[{'x':_0x2e8cbb+0xc,'y':_0x157197+0x4},{'x':_0x2e8cbb+0xc,'y':_0x157197-0xa},{'x':_0x2e8cbb+0xc,'y':_0x157197+0x12},{'x':_0x2e8cbb-_0x21be3f[_0x5f47c9(0x278)]-0x5,'y':_0x157197+0x4},{'x':_0x2e8cbb-_0x21be3f[_0x5f47c9(0x278)]-0x5,'y':_0x157197-0xa},{'x':_0x2e8cbb-_0x21be3f[_0x5f47c9(0x278)]-0x5,'y':_0x157197+0x12},{'x':_0x2e8cbb-_0x21be3f[_0x5f47c9(0x278)]/0x2,'y':_0x157197-0xf},{'x':_0x2e8cbb-_0x21be3f[_0x5f47c9(0x278)]/0x2,'y':_0x157197+0x19}],_0x204a8f=findPositionWithoutOverlap(_0x3aa419,_0x30cfd2,_0x21be3f);_0xf2d437[_0x5f47c9(0x1eb)]('x',_0x204a8f['x'])[_0x5f47c9(0x1eb)]('y',_0x204a8f['y']);}function findPositionWithoutOverlap(_0x55820c,_0x15e9f7,_0x260bad){var _0x4f5142=_0x2f87be;for(var _0xe66d08=0x0;_0xe66d08<_0x55820c[_0x4f5142(0x229)];_0xe66d08++){var _0x547241=_0x55820c[_0xe66d08],_0x335d97=![],_0x407bd3={'x1':_0x547241['x'],'y1':_0x547241['y']-_0x260bad[_0x4f5142(0x22b)],'x2':_0x547241['x']+_0x260bad[_0x4f5142(0x278)],'y2':_0x547241['y']+0x5};if(_0x407bd3['x1']<0x0||_0x407bd3['x2']>width||_0x407bd3['y1']<0x0||_0x407bd3['y2']>height)continue;_0x15e9f7[_0x4f5142(0x20e)](function(){var _0xb44891=_0x4f5142,_0x88a8f0=d3[_0xb44891(0x222)](this)[_0xb44891(0x1d7)]()[_0xb44891(0x204)](),_0x162e23=parseFloat(d3[_0xb44891(0x222)](this)[_0xb44891(0x1eb)]('x')),_0x57866d=parseFloat(d3['select'](this)[_0xb44891(0x1eb)]('y')),_0x2b85b5={'x1':_0x162e23,'y1':_0x57866d-_0x88a8f0[_0xb44891(0x22b)],'x2':_0x162e23+_0x88a8f0[_0xb44891(0x278)],'y2':_0x57866d+0x5};!(_0x407bd3['x2']<_0x2b85b5['x1']||_0x407bd3['x1']>_0x2b85b5['x2']||_0x407bd3['y2']<_0x2b85b5['y1']||_0x407bd3['y1']>_0x2b85b5['y2'])&&(_0x335d97=!![]);});if(!_0x335d97)return _0x547241;}for(var _0xe66d08=0x0;_0xe66d08<_0x55820c[_0x4f5142(0x229)];_0xe66d08++){var _0x547241=_0x55820c[_0xe66d08],_0x407bd3={'x1':_0x547241['x'],'y1':_0x547241['y']-_0x260bad['height'],'x2':_0x547241['x']+_0x260bad[_0x4f5142(0x278)],'y2':_0x547241['y']+0x5};if(_0x407bd3['x1']>=0x0&&_0x407bd3['x2']<=width&&_0x407bd3['y1']>=0x0&&_0x407bd3['y2']<=height)return _0x547241;}var _0x1c83fe={'x':Math['min'](Math[_0x4f5142(0x23f)](0x0,_0x55820c[0x0]['x']),width-_0x260bad['width']),'y':Math[_0x4f5142(0x267)](Math['max'](_0x260bad[_0x4f5142(0x22b)],_0x55820c[0x0]['y']),height)};return _0x1c83fe;}var originalUpdateChart=updateChart;updateChart=function(){originalUpdateChart(),setTimeout(function(){var _0xb6afa3=_0x37d9,_0x44540d=svg[_0xb6afa3(0x1ef)](_0xb6afa3(0x220));_0x44540d['each'](function(){var _0x2a1150=_0xb6afa3,_0xdd812f=d3[_0x2a1150(0x222)](this),_0x229e16=_0xdd812f[_0x2a1150(0x281)](),_0x538df2=filteredData[_0x2a1150(0x27e)](function(_0x11b731){return _0x11b731[0x1]===_0x229e16;});if(_0x538df2){var _0x56997f=xScale(_0x538df2[header[_0x2a1150(0x248)](xMetric)]),_0x5dcf58=yScale(_0x538df2[header[_0x2a1150(0x248)](yMetric)]);positionLabelToAvoidOverlap(_0xdd812f,_0x56997f,_0x5dcf58);}});},0xa);},document[_0x2f87be(0x1fa)]('DOMContentLoaded',function(){var _0x3c662b=_0x2f87be;const _0x4db558=document[_0x3c662b(0x1df)](_0x3c662b(0x1be));_0x4db558[_0x3c662b(0x1c4)]=medianLinesVisible?_0x3c662b(0x1e6):_0x3c662b(0x21b);});
    </script>
  <script>
    // Translation functionality
    function setLanguage(language) {
      localStorage.setItem('preferredLanguage', language);
      // Update URL with language parameter
      const url = new URL(window.location.href);
      if (language === 'en') {
        url.searchParams.delete('lang');
      } else {
        url.searchParams.set('lang', language);
      }
      window.history.pushState({}, '', url);
      applyLanguage(language);
    }
    
    function getPreferredLanguage() {
      // Check URL parameter first
      const urlParams = new URLSearchParams(window.location.search);
      const langParam = urlParams.get('lang');
      if (langParam) {
        return langParam;
      }
      return localStorage.getItem('preferredLanguage') || getBrowserLanguage() || 'en';
    }
    
    function getBrowserLanguage() {
      return navigator.language.slice(0, 2);
    }
    
    function applyLanguage(language) {
      fetch(`locales/${language}.json`)
        .then(response => response.json())
        .then(translations => {
          // Store translations globally for dynamic access
          window.currentTranslations = translations;
          
          // Update text content for elements with data-i18n attribute
          document.querySelectorAll('[data-i18n]').forEach(element => {
            const keys = element.getAttribute('data-i18n').split('.');
            let value = translations;
            for (const key of keys) {
              value = value[key];
            }
            if (value) {
              element.textContent = value;
            }
          });
    
          // Update placeholders for elements with data-i18n-placeholder attribute
          document.querySelectorAll('[data-i18n-placeholder]').forEach(element => {
            const keys = element.getAttribute('data-i18n-placeholder').split('.');
            let value = translations;
            for (const key of keys) {
              value = value[key];
            }
            if (value) {
              element.placeholder = value;
            }
          });
    
          // Update meta tags
          document.title = translations.meta.title;
          document.querySelector('meta[name="description"]').setAttribute('content', translations.meta.description);
          document.querySelector('meta[name="language"]').setAttribute('content', language);
        });
    }
    
    // Initialize translations
    const preferredLanguage = getPreferredLanguage();
    applyLanguage(preferredLanguage);
    
    // Language dropdown functionality
    document.addEventListener('DOMContentLoaded', function() {
      const languageButton = document.getElementById('languageButton');
      const languageDropdown = document.getElementById('languageDropdown');
    
      // Toggle dropdown on button click
      languageButton.addEventListener('click', function(e) {
        e.stopPropagation();
        languageDropdown.classList.toggle('show');
      });
    
      // Handle language option clicks
      document.querySelectorAll('.language-option').forEach(option => {
        option.addEventListener('click', function(e) {
          e.preventDefault();
          const lang = this.getAttribute('href').split('=')[1];
          setLanguage(lang);
          languageDropdown.classList.remove('show');
        });
      });
    
      // Close dropdown when clicking outside
      document.addEventListener('click', function(event) {
        if (!event.target.closest('.language-switcher-container')) {
          languageDropdown.classList.remove('show');
        }
      });
    });
    </script>
    
</body>
</html>
