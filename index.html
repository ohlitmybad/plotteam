



<!DOCTYPE html>

<html>
<head>

	<meta name="viewport" content="width=device-width, initial-scale=0.36">
		<link rel="shortcut icon" type="image/x-icon" href="https://datamb.football/favicon.ico">
	<meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@DataMB_">
    <meta name="twitter:title" content="DataMB | Plot Teams">
    <meta name="twitter:description" content="Generate scatter plots for Top 5 League teams">
    <meta name="twitter:image" content="https://i.imgur.com/p43wTxg.png">
    <meta property="og:image" content="https://i.imgur.com/p43wTxg.png">
	<title translate="no">DataMB | Plot Teams</title>
	
<script src="https://d3js.org/d3.v5.min.js"></script>
<link rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">


<style>




.header {
  font-family: system-ui;
  padding: 20px;
  text-align: center;
  color: #fff;
  display: flex;
  align-items: center;
  justify-content: space-between;
background: #ececec;
}

.header .logo {
  display: flex;
  align-items: center;
}



.header .logo .img2 {
  width: 40px;
  height: 40px;
  opacity: 0.84;
  position: static; /* Reset the 'position' property if needed */
  top: auto; /* Reset the 'top' property if needed */
  z-index: auto; /* Reset the 'z-index' property if needed */
  left: auto; /* Reset the 'left' property if needed */
  pointer-events: auto; /* Reset the 'pointer-events' property if needed */
}

body.dark-mode header .logo-text a {
  color: #444444;
}

.header .logo-text {
  margin-left: 10px;
  font-size: 20px;
  font-weight: 600;
}

.header .navigation {
  display: center;
  align-items: center;
      word-spacing: 1.3em; /* Adjust the spacing as needed */	

}

.header .button {
  margin: 0 10px;
  padding: 0px 20px;
  color: #444444;
  text-decoration: none;
  border-radius: 0px;
font-size: 18px;
}

header a {
      color: #444444;
      text-decoration: none;

    }

.header .twitter-link svg {
  width: 25px;
  height: 24px;
  fill: #444444;
}

 body.dark-mode {
    background-color: #0F0F0E;
  }



	
  /* Dark Mode Styles */
  body.dark-mode,
  body.dark-mode * {
    color: #f2f2f2;
  }

  body.dark-mode {
    background-color: #0F0F0E;
  }

body.dark-mode .tooltip {
  color: #000000; /* Set the font color to black in dark mode */
  background-color: #f9f9f9;
  border: solid;
  border-width: 1px;
  border-radius: 5px;
  padding: 10px;
  font-size: 12px;
}



 body.dark-mode #search-bar {
    color: #000; /* Specify the desired text color for dark mode */
background-color : #999
  }
	
 body.dark-mode	  #search-bar::placeholder {
    color: #fff; /* Specify the desired color for the placeholder text */
  }

  body.dark-mode svg .x-label {
    /* Override SVG text color */
    fill: #f2f2f2;
  }


  body.dark-mode svg .y-label {
    /* Override SVG text color */
    fill: #f2f2f2;
  }

body.dark-mode select {
  color: #f2f2f2; /* Set the text color to a light color in dark mode */
  background-color: #333333; /* Set the background color to a dark color in dark mode */
}


body.dark-mode .player-name {
  fill: #ffffff; /* Set the fill color to white in dark mode */
}

body.dark-mode button {
  /* Override button background color */
  background-color: #333333;
}

body.dark-mode button,
body.dark-mode button:focus {
  /* Override button text color */
  color: #f2f2f2;
}

body.dark-mode button:hover {
  /* Preserve button hover property */
  color: initial;
}


	

.icon2::before {
  content: "\f118";
  font-family: "Ionicons"; /* Replace with the appropriate font */
font-size: 22px;
}


.icon3::before {
  content: "\f448";
  font-family: "Ionicons"; /* Replace with the appropriate font */
font-size: 22px;
}


body.dark-mode #searchInput1 {
    color: #000; /* Specify the desired text color for dark mode */
background-color : #999;
  }
	
 body.dark-mode	  #searchInput1::placeholder {
    color: #fff; /* Specify the desired color for the placeholder text */
  }

 body.dark-mode	  #searchButton1 {
    color: #fff !important; /* Specify the desired color for the placeholder text */
background-color : #333333;
  }

.button-1 {
  align-items: center;
height: 0px;
  background-color: #F9F9F9;
  border-radius: 6px;
  box-shadow: 0px 0px 5px rgba(0, 0, 0, 0.2);
  box-sizing: border-box;
  color: #121212;
  cursor: pointer;
  display: inline-flex;
  flex: 1 1 auto;
  font-family: Inter,sans-serif;
  font-size: 0.82rem;
  font-weight: 700;
  justify-content: center;
  line-height: 1;
  margin: 0;
  outline: none;
  padding: 1rem 1.2rem;
  text-align: center;
  text-decoration: none;
  transition: box-shadow .1s,-webkit-box-shadow .1s;
  white-space: nowrap;
  border: 0;
  user-select: none;
  position: absolute;
  top: 100px;
  left: 255px;
width: 85px; 
 
  touch-action: manipulation;
}

.button-1:hover {
   box-shadow: rgba(0, 0, 0, 0.4) 3px 3px 3px;
}

.button-2 {
  align-items: center;
  background-color: #F9F9F9;
  border-radius: 6px;
  box-shadow: 0px 0px 5px rgba(0, 0, 0, 0.2);
  box-sizing: border-box;
  color: #121212;
  cursor: pointer;
  display: inline-flex;
  flex: 1 1 auto;
  font-family: Inter,sans-serif;
  font-size: 0.82rem;
  font-weight: 700;
  justify-content: center;
  line-height: 1;
  margin: 0;
  outline: none;
  padding: 1rem 1.2rem;
  text-align: center;
  text-decoration: none;
  transition: box-shadow .1s,-webkit-box-shadow .1s;
  white-space: nowrap;
  border: 0;
  user-select: none;
  position: absolute;
  top: 100px;
  left: 355px;
height: 20px;
width: 85px; 
 
  touch-action: manipulation;
}

.button-2:hover {
   box-shadow: rgba(0, 0, 0, 0.4) 3px 3px 3px;
}

.button-3 {
  align-items: center;
height: 20px;
  background-color: #F9F9F9;
  border-radius: 6px;
  box-shadow: 0px 0px 5px rgba(0, 0, 0, 0.2);
  box-sizing: border-box;
  color: #121212;
  cursor: pointer;
  display: inline-flex;
  flex: 1 1 auto;
  font-family: Inter,sans-serif;
  font-size: 0.82rem;
  font-weight: 700;
  justify-content: center;
  line-height: 1;
  margin: 0;
  outline: none;
  padding: 1rem 1.2rem;
  text-align: center;
  text-decoration: none;
  transition: box-shadow .1s,-webkit-box-shadow .1s;
  white-space: nowrap;
  border: 0;
  user-select: none;
  position: absolute;
  top: 100px;
  left: 455px;
width: 85px; 
 
  touch-action: manipulation;
}

.button-3:hover {
   box-shadow: rgba(0, 0, 0, 0.4) 3px 3px 3px;
}

.button-4 {
  align-items: center;
  background-color: #F9F9F9;
  border-radius: 6px;
  box-shadow: 0px 0px 5px rgba(0, 0, 0, 0.2);
  box-sizing: border-box;
  color: #121212;
  cursor: pointer;
  display: inline-flex;
  flex: 1 1 auto;
  font-family: Inter,sans-serif;
  font-size: 0.82rem;
  font-weight: 700;
  justify-content: center;
  line-height: 1;
  margin: 0;
  outline: none;
  padding: 1rem 1.2rem;
  text-align: center;
  text-decoration: none;
  transition: box-shadow .1s,-webkit-box-shadow .1s;
  white-space: nowrap;
  border: 0;
  user-select: none;
  position: absolute;
  top: 100px;
  left: 555px;
height: 20px;
width: 85px; 
 
  touch-action: manipulation;
}

.button-4:hover {
   box-shadow: rgba(0, 0, 0, 0.4) 3px 3px 3px;
}



.button-5 {
  align-items: center;
height: 20px;
  background-color: #F9F9F9;
  border-radius: 6px;
  box-shadow: 0px 0px 5px rgba(0, 0, 0, 0.2);
  box-sizing: border-box;
  color: #121212;
  cursor: pointer;
  display: inline-flex;
  flex: 1 1 auto;
  font-family: Inter,sans-serif;
  font-size: 0.82rem;
  font-weight: 700;
  justify-content: center;
  line-height: 1;
  margin: 0;
  outline: none;
  padding: 1rem 1.2rem;
  text-align: center;
  text-decoration: none;
  transition: box-shadow .1s,-webkit-box-shadow .1s;
  white-space: nowrap;
  border: 0;
  user-select: none;
  position: absolute;
  top: 100px;
  left: 655px;
width: 85px; 
 
  touch-action: manipulation;
}

.button-5:hover {
   box-shadow: rgba(0, 0, 0, 0.4) 3px 3px 3px;
}

.button-6 {
  align-items: center;
  background-color: #F9F9F9;
  border-radius: 6px;
  box-shadow: 0px 0px 5px rgba(0, 0, 0, 0.2);
  box-sizing: border-box;
  color: #121212;
  cursor: pointer;
  display: inline-flex;
  flex: 1 1 auto;
  font-family: Inter,sans-serif;
  font-size: 0.82rem;
  font-weight: 700;
  justify-content: center;
  line-height: 1;
  margin: 0;
  outline: none;
  padding: 1rem 1.2rem;
  text-align: center;
  text-decoration: none;
  transition: box-shadow .1s,-webkit-box-shadow .1s;
  white-space: nowrap;
  border: 0;
  user-select: none;
  position: absolute;
  top: 1055px;
  left: 755px;
height: 20px;
width: 95px; 
 
  touch-action: manipulation;
}

.dark-mode-toggle {
    position: absolute;
    top: 1051.9px;
left: 870px;
    display: flex;
    align-items: center;
    justify-content: center;
    width: 35px;
    height: 35px;
    background-color: #e0e0de;
    border-radius: 50%;
    cursor: pointer;
    box-shadow: 0px 0px 5px rgba(0, 0, 0, 0.2);
  }


.dark-mode-toggle .toggle-icon::before {
  font-family: "Ionicons";
  content: "\f467"; /* Unicode value for the moon icon in Ionicons */
  font-size: 35px; /* Adjust the value as needed */
}

body.dark-mode .dark-mode-toggle {
  background-color: #333333;
}



body.dark-mode .dark-mode-toggle .toggle-icon::before {
  font-family: "Ionicons";
  content: "\f3b0"; /* Unicode value for the sun icon in Ionicons */
  font-size: 24px; /* Adjust the value as needed */
}


.button-6:hover {
   box-shadow: rgba(0, 0, 0, 0.4) 3px 3px 3px;
}





body.dark-mode .toggle-slider {
  background-color: #2B2C2E; /* Darker background color for dark mode */
}

body.dark-mode input:checked + .toggle-slider:before {
  background-color: #ccc; /* Darker background color for dark mode */
}


circle.highlighted {
  stroke: #ff00ff;
  stroke-width: 3px;
}



circle {
  cursor: pointer;
}


#search-bar {
    position: absolute;
    top: 1065px; /* Adjust the desired top position */
    left: 80px; /* Adjust the desired left position */
  }

		 #select-league {
    position: absolute;
    top: 1065px;
    left: 250px;	  
  }	


.toggle-button {
  background-color: #f5f5f5;
  color: #333;
  padding: 6px 12px;
  border: 1px solid #ccc;
  border-radius: 4px;
  cursor: pointer;
position: absolute;
top: 1057px;
left: 408px;
}



.icon::before {
  content: "\f2b5";
  font-family: "Ionicons"; /* Replace with the appropriate font */
font-size: 22px;
}


     img {
            width: 200px;
position: absolute;
top: 635px;
pointer-events: none;
z-index: -1; 

left: 475px;
opacity: .055; 	
	}







.icon4::before {
  content: "\f21c";
  font-family: "Ionicons"; /* Replace with the appropriate font */
font-size: 22px;
}		

.icon3::before {
  content: "\f448";
  font-family: "Ionicons"; /* Replace with the appropriate font */
font-size: 22px;
}

  body, html {
            margin: 0;
            padding: 0;
        }


#table {
    position: absolute;
    width: 900px;
    font-family: 'Arial';
font-size: 13px;
    left: 78px;
    top: 1152px;
    border: 1px solid #808080; /* Add the outline */
}
	     
</style>
<header class="header">
   <div class="logo">
    <a href="http://datamb.football">
      <img src="https://i.imgur.com/UurMbGS.png" alt="Football player statistics plot comparison" class="img2">
    </a>
    <div class="logo-text">
      <a href="http://datamb.football">Plots</a>
    </div>
  </div>
  <nav class="navigation">
    <a href="http://datamb.football/radars/" class="button">Radars</a>
    <a href="http://datamb.football/join/" class="button">Pro</a>
    <a href="http://datamb.football/glossary/" class="button">Guide</a>
  </nav>
  <a href="https://twitter.com/datamb_" target="_blank" class="twitter-link">
    <svg width="25" height="24" fill="#bcbcbc" xmlns="http://www.w3.org/2000/svg">
      <path d="M20.315 3.95c-.882.432-1.747.608-2.647.873-.99-1.116-2.456-1.177-3.865-.65-1.409.528-2.332 1.818-2.312 3.298v.882c-2.863.073-5.413-1.231-7.058-3.53 0 0-3.69 6.559 3.53 9.706-1.653 1.1-3.3 1.843-5.295 1.765 2.919 1.59 6.1 2.138 8.854 1.339 3.158-.918 5.754-3.285 6.75-6.832.298-1.078.445-2.192.439-3.311-.002-.22 1.332-2.446 1.604-3.54Z" />
    </svg>
  </a>
</header>

	<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7677714701428206"
     crossorigin="anonymous"></script>
	
</head>

<script async src="https://www.googletagmanager.com/gtag/js?id=G-PSBMXX80EF"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-PSBMXX80EF');
</script>

<body>
	


<a href="https://datamb.football/teamradars/" target="_self" rel="noopener noreferrer">
  <button class="button-6" role="button">Team Radars</button>
</a>
	
	 <img src="https://i.imgur.com/UurMbGS.png" alt="Football data visualization">

	
	<div class="dark-mode-toggle" onclick="toggleDarkMode()">
    <div class="toggle-icon"></div>
  </div>

<svg id="scatter-plot"></svg>
<select id="select-league" onchange="updateChart()">
  <option value="all">All Teams</option>
  <option value="Premier League">Premier League</option>
  <option value="Premier League">La Liga</option>
  <option value="Premier League">Bundesliga</option>
  <option value="Premier League">Serie A</option>
  <option value="Premier League">Ligue 1</option>
</select>
<input type="text" id="search-bar" placeholder="Search team...">
<button id="toggle-median-lines" class="toggle-button"><div class="icon"></div></button>
<script>




 var csvData = `ID,Player,Top 7 Leagues,Goals,xG per 90,Shots on target per 90,Shots on target %,Passes completed,Pass accuracy %,Possession %,Positional attacks per 90,Counter attacks per 90,Touches in the box per 90,Goals conceded per 90,SoT against per 90,Defensive duels per 90,Defensive duel %,Aerial duels per 90,Aerial duels %,Passes per possession,PPDA
1,Almería,La Liga,1.14,1.66,5.43,38.38,374.29,86.35,53.42,23.14,2.71,17.14,2.57,5.86,61.71,55.79,34.86,44.67,4.39,10.42
2,Arsenal,Premier League,1.89,1.90,5.22,38.52,506.44,89.95,59.62,31.44,1.11,28.56,0.78,3.00,59.00,61.39,29.89,39.41,6.02,10.82
3,Aston Villa,Premier League,2.30,2.06,5.70,40.43,437.50,87.99,56.85,25.60,3.10,22.40,1.50,4.40,59.40,56.40,21.30,49.30,5.39,15.09
4,Atalanta,Serie A,1.86,1.80,5.86,38.68,407.14,83.70,49.77,33.71,2.14,26.71,0.71,3.14,77.57,66.30,38.29,48.88,4.53,10.13
5,Athletic Bilbao,La Liga,1.86,1.77,3.86,36.00,345.29,80.62,52.10,34.29,1.57,19.86,0.86,5.29,58.00,53.45,40.14,39.50,3.80,10.06
6,Atlético Madrid,La Liga,2.29,1.29,4.29,47.62,378.57,84.58,45.54,24.86,2.00,17.14,0.86,4.14,70.71,63.03,27.14,54.74,4.72,14.59
7,Augsburg,Bundesliga,1.40,1.38,3.80,29.23,349.60,83.68,49.07,28.20,0.80,16.80,2.60,5.20,63.80,61.13,46.20,45.89,4.11,11.70
8,Barcelona,La Liga,2.88,2.29,6.75,42.86,604.88,90.75,68.28,35.63,1.50,28.38,1.00,3.50,56.00,61.61,31.25,53.60,7.01,7.48
9,Bayer Leverkusen,Bundesliga,4.14,2.80,9.00,47.37,584.14,89.79,57.73,37.43,3.71,27.57,0.86,3.57,52.86,62.97,19.57,45.26,6.60,10.93
10,Bayern München,Bundesliga,3.25,2.82,8.75,42.42,556.13,89.63,63.39,39.25,1.88,38.50,1.25,3.50,51.25,58.29,25.38,52.71,6.16,9.88
11,Bochum,Bundsliga,0.80,1.56,5.00,35.21,282.00,75.60,45.60,31.20,2.60,19.20,3.20,7.00,86.80,65.21,59.20,44.26,3.34,9.70
12,Bologna,Serie A,0.71,1.12,4.57,44.44,502.57,89.15,56.47,29.57,1.29,14.57,0.57,2.29,73.71,59.69,21.57,55.63,6.10,10.72
13,Borussia Dortmund,Bundesliga,2.14,2.34,5.00,31.25,453.43,86.60,59.39,33.29,1.43,23.71,1.14,3.57,54.57,61.52,35.00,53.47,5.01,9.47
14,Borussia M'gladbach,Bundesliga,2.50,1.82,5.33,38.10,361.50,84.20,47.21,24.00,2.33,18.00,2.17,6.67,61.50,58.54,38.83,48.50,4.09,14.16
15,Bournemouth,Premier League,1.25,1.42,5.00,40.00,307.13,82.01,48.29,28.00,2.50,20.50,1.63,4.50,76.63,65.58,31.50,38.10,3.44,9.23
16,Brentford,Premier League,1.25,1.96,4.00,31.68,369.13,83.23,51.83,31.88,0.88,25.25,1.38,4.13,71.00,63.56,45.00,48.06,4.28,10.50
17,Brest,Ligue 1,1.33,1.79,5.50,34.74,333.67,82.76,50.83,32.17,1.17,23.00,1.00,4.50,82.00,64.43,40.17,50.21,3.63,8.58
18,Brighton,Premier League,2.50,2.29,7.25,44.62,524.13,89.71,63.08,32.63,1.63,30.13,1.50,4.75,71.38,58.67,23.38,44.92,5.86,7.62
19,Burnley,Premier League,1.29,1.09,3.43,32.00,456.14,87.77,55.82,25.00,0.86,18.29,1.86,3.86,62.71,58.31,33.00,45.89,5.51,12.23
20,Cádiz,La Liga,0.86,1.20,2.71,28.36,222.00,78.25,42.23,22.43,2.29,12.86,1.14,5.43,78.57,54.55,42.00,45.92,2.86,9.63
21,Cagliari,Serie A,0.57,1.18,2.29,21.62,292.57,81.43,40.77,27.71,2.14,19.29,1.43,4.43,74.29,56.54,38.57,39.63,3.41,16.55
22,Celta de Vigo,La Liga,1.00,1.49,3.71,30.95,308.71,81.86,43.15,26.00,2.71,19.14,1.57,5.14,70.29,56.71,36.29,39.76,3.53,14.76
23,Chelsea,Premier League,1.00,1.93,5.13,35.34,536.88,88.47,63.39,34.88,2.25,28.63,0.88,3.13,60.63,55.46,29.88,54.39,5.90,9.20
24,Clermont,Ligue 1,0.83,1.40,3.00,23.38,461.00,85.21,60.84,33.83,1.00,16.33,2.00,4.83,58.67,63.35,31.50,47.09,4.93,8.21
25,Crystal Palace,Premier League,1.25,1.54,4.63,42.05,339.13,84.25,44.43,26.38,2.13,18.25,1.50,3.75,69.63,64.27,32.13,49.03,4.12,14.12
26,Darmstadt 98,Bundesliga,1.00,1.43,4.17,33.33,378.83,84.12,51.33,25.83,1.50,16.00,3.17,7.67,59.83,57.10,37.00,48.65,4.56,12.19
27,Deportivo Alavés,La Liga,0.86,1.31,3.57,30.49,258.57,76.50,46.41,29.29,1.43,17.29,1.43,4.00,80.14,63.99,44.43,49.52,3.09,9.70
28,Eintracht Frankfurt,Bundesliga,1.78,1.47,4.00,40.91,501.33,86.79,58.70,29.89,1.33,23.22,0.56,3.00,58.22,61.26,39.89,49.86,5.69,8.79
29,Empoli,Serie A,0.29,0.94,3.29,34.85,321.29,83.98,46.94,26.29,1.14,15.00,2.14,5.57,66.86,56.41,32.71,43.67,3.79,12.88
30,Everton,Premier League,1.13,1.77,4.88,36.45,295.25,80.64,43.48,28.75,2.25,18.13,1.50,4.25,68.00,61.21,35.38,48.41,3.41,12.03
31,Fiorentina,Serie A,1.78,1.44,4.78,39.09,401.11,85.89,59.57,32.11,0.56,19.11,1.44,4.11,62.67,60.82,38.44,46.82,4.54,8.55
32,Freiburg,Bundesliga,1.43,2.22,6.43,40.54,396.00,84.54,53.12,29.00,2.00,22.86,1.71,4.00,62.71,63.55,46.00,47.20,4.48,10.64
33,Frosinone,Serie A,1.43,1.35,3.57,37.88,331.14,83.41,47.51,23.00,2.14,14.86,1.14,5.43,69.71,56.97,32.86,43.91,3.90,10.48
34,Fulham,Premier League,1.00,1.50,2.88,26.44,402.00,85.81,50.68,26.25,1.63,19.38,1.50,5.75,70.25,61.21,28.75,50.00,4.63,13.27
35,Genoa,Serie A,1.71,1.00,3.43,42.86,251.00,80.08,37.58,21.29,1.14,11.71,1.71,3.29,71.43,61.40,33.14,52.59,3.45,16.63
36,Getafe,La Liga,1.43,1.20,4.14,42.03,211.29,76.79,38.59,22.86,1.57,13.57,1.86,5.57,67.57,55.60,52.71,46.34,2.71,11.52
37,Girona,La Liga,2.57,1.96,5.43,48.10,378.57,87.11,53.28,23.71,1.86,18.86,1.14,4.43,68.14,60.38,32.71,42.36,4.57,9.35
38,Granada,La Liga,1.43,1.11,4.71,50.00,272.57,79.20,46.21,22.29,2.14,13.14,2.57,6.00,70.86,60.28,32.71,45.85,3.22,11.58
39,Heidenheim,Bundesliga,2.83,2.99,6.83,41.84,297.83,79.99,42.64,30.50,1.17,23.67,2.17,5.67,83.83,67.59,36.67,50.91,3.37,14.33
40,Hellas Verona,Serie A,1.00,1.03,3.29,33.82,281.14,80.36,47.80,23.71,2.00,10.86,1.00,4.29,74.29,59.81,46.14,47.37,3.35,9.65
41,Hoffenheim,Bundesliga,2.67,2.10,6.17,39.36,343.50,82.24,52.28,31.67,1.33,22.50,1.17,6.50,60.50,58.68,40.50,46.09,3.73,9.45
42,Internazionale,Serie A,2.29,2.02,4.86,31.19,421.43,87.46,51.69,27.86,3.43,25.86,0.57,2.71,62.43,61.78,29.14,46.57,5.01,10.17
43,Juventus,Serie A,2.00,1.74,4.50,32.93,387.33,85.79,49.71,25.83,3.67,24.00,1.00,3.67,72.17,63.28,25.50,54.90,4.61,11.59
44,Köln,Bundesliga,1.17,1.33,3.50,29.17,341.67,78.45,46.73,30.67,2.83,17.83,1.67,4.50,77.33,63.36,41.83,45.42,3.64,12.60
45,Las Palmas,La Liga,0.29,0.76,2.86,29.85,441.57,86.68,55.30,26.00,0.43,11.71,0.86,5.00,74.86,61.26,29.86,46.89,4.93,9.98
46,Lazio,Serie A,1.14,1.29,3.29,29.49,478.43,87.79,52.88,29.57,1.57,19.86,1.29,4.43,57.71,56.19,26.14,39.89,5.71,14.66
47,Le Havre,Ligue 1,1.67,1.17,3.50,33.87,317.67,82.98,42.19,24.50,1.67,15.00,1.17,5.50,64.00,60.94,37.17,46.19,3.95,14.94
48,Lecce,Serie A,1.29,1.12,4.14,31.52,315.43,83.99,48.25,28.71,1.43,15.43,0.71,3.57,67.71,59.49,28.43,50.25,3.64,10.53
49,Lens,Ligue 1,1.00,1.46,4.29,28.30,394.71,83.27,50.83,35.57,2.14,22.86,1.86,5.00,63.57,59.33,31.14,39.91,4.27,11.52
50,Lille,Ligue 1,1.44,1.82,5.78,42.28,514.44,87.94,61.59,34.89,1.22,25.22,1.22,4.33,67.89,61.37,32.56,45.39,5.36,8.86
51,Liverpool,Premier League,2.63,2.81,5.38,30.28,471.75,87.24,56.34,33.25,2.25,29.38,0.88,3.50,74.63,57.62,28.63,53.28,5.20,9.89
52,Lorient,Ligue 1,1.67,0.83,3.17,42.22,388.33,86.88,43.19,20.17,1.50,12.50,2.00,6.33,75.67,52.64,28.83,45.09,4.83,20.96
53,Luton Town,Premier League,0.86,1.33,3.00,25.00,297.29,81.48,45.84,30.29,1.86,18.43,2.00,5.57,65.00,64.84,42.71,50.50,3.41,14.79
54,Mainz 05,Bundesliga,0.83,1.82,4.00,29.63,346.00,80.09,49.55,33.00,1.50,22.50,2.33,4.17,65.67,59.90,66.83,43.39,3.78,9.69
55,Mallorca,La Liga,1.29,1.48,3.29,35.38,230.71,79.48,39.52,20.57,1.43,13.14,1.71,4.43,78.57,62.00,40.14,50.53,3.06,10.67
56,Manchester City,Premier League,2.10,2.25,7.40,43.27,609.70,91.52,67.65,35.90,0.80,30.40,0.70,2.50,49.20,66.46,23.20,43.53,7.22,9.17
57,Manchester United,Premier League,1.63,1.84,5.13,36.94,424.63,86.11,49.13,31.25,3.00,21.50,1.75,5.50,75.13,57.40,22.88,40.98,5.43,13.80
58,Metz,Ligue 1,1.17,0.79,3.33,39.22,253.50,81.34,37.17,20.17,1.00,8.50,1.67,6.50,72.50,60.00,30.00,41.67,3.23,16.56
59,Milan,Serie A,1.86,1.62,4.86,41.98,439.86,89.40,57.33,24.57,3.86,18.57,1.14,3.29,62.29,66.97,25.14,51.14,5.51,12.22
60,Monaco,Ligue 1,2.50,2.25,5.67,39.08,476.33,86.50,53.97,32.00,1.83,22.50,1.33,3.67,80.67,60.74,26.00,37.82,5.17,9.47
61,Montpellier,Ligue 1,1.50,1.41,4.83,37.66,306.17,81.36,46.02,26.50,4.67,18.00,1.50,5.50,73.67,60.18,38.83,44.21,3.47,10.39
62,Monza,Serie A,0.71,1.72,3.86,24.55,463.00,88.00,55.62,30.00,1.57,22.57,1.29,4.43,69.29,58.76,26.00,41.21,5.58,13.76
63,Nantes,Ligue 1,1.83,1.55,4.83,46.03,312.17,82.11,39.41,19.83,5.33,16.17,1.83,6.00,67.33,60.15,29.67,48.31,3.81,16.95
64,Napoli,Serie A,2.00,2.30,5.57,31.71,468.71,87.68,56.75,32.71,2.14,30.29,1.00,2.14,63.14,61.09,26.43,48.11,5.59,9.42
65,Newcastle United,Premier League,2.13,1.61,5.63,46.88,390.13,86.55,48.29,23.88,1.75,21.38,0.88,4.25,68.75,56.18,27.75,44.59,4.84,12.77
66,Nice,Ligue 1,1.33,1.53,5.33,36.78,430.50,87.23,49.13,27.17,2.83,19.83,0.67,2.50,69.67,61.24,22.83,51.09,5.11,11.68
67,Nottingham Forest,Premier League,1.00,1.14,2.57,28.13,252.57,80.33,35.80,23.29,2.14,17.43,1.43,4.29,70.43,63.08,42.86,47.33,3.43,19.00
68,Olympique Lyonnais,Ligue 1,0.50,1.48,4.67,35.90,388.00,85.12,50.30,31.00,2.33,22.33,1.83,5.00,78.50,53.29,29.33,40.91,4.57,11.05
69,Olympique Marseille,Ligue 1,1.33,2.04,5.89,34.87,364.56,83.76,47.41,32.33,3.00,23.78,1.44,3.89,66.44,61.87,30.22,45.22,4.12,11.54
70,Osasuna,La Liga,1.11,1.30,3.22,28.16,304.67,79.62,47.43,32.56,1.56,18.22,1.56,3.33,68.44,57.79,44.56,45.14,3.54,11.34
71,PSG,Ligue 1,2.29,2.28,4.43,26.96,716.29,91.23,71.45,37.86,2.00,31.00,0.86,3.29,62.86,61.82,19.71,40.58,8.36,7.03
72,Rayo Vallecano,La Liga,1.00,1.67,5.86,48.24,288.71,79.76,47.46,24.43,2.29,16.29,1.29,5.00,74.86,59.92,31.29,41.55,3.38,8.12
73,RB Leipzig,Bundesliga,2.88,1.71,6.75,51.92,436.88,85.77,53.21,26.00,1.88,16.13,0.88,4.00,62.38,63.13,31.50,47.22,5.23,12.45
74,Real Betis,La Liga,0.88,1.24,4.00,31.68,376.50,85.52,50.34,27.75,2.25,19.38,1.63,5.25,72.75,59.11,27.63,41.18,4.36,10.85
75,Real Madrid,La Liga,1.75,2.28,7.75,40.26,559.25,89.84,60.42,38.00,1.88,33.13,0.75,2.88,54.25,60.83,23.75,46.32,6.04,9.94
76,Real Sociedad,La Liga,1.75,1.29,3.63,33.72,379.38,85.71,54.26,26.75,2.00,13.25,1.38,4.63,65.75,61.03,47.38,48.02,4.28,8.78
77,Reims,Ligue 1,1.83,1.31,4.33,44.07,322.33,80.42,49.14,30.33,2.17,14.83,1.33,4.00,86.33,60.62,34.83,45.45,3.80,9.00
78,Rennes,Ligue 1,1.86,2.07,7.29,46.79,491.71,87.90,58.57,33.86,1.43,24.71,0.86,3.71,55.86,60.87,28.86,48.02,5.44,12.08
79,Roma,Serie A,2.14,1.61,4.57,32.32,457.14,86.89,58.29,32.14,1.14,19.29,1.71,3.00,64.57,60.18,34.14,53.97,5.56,9.45
80,Salernitana,Serie A,0.71,0.84,3.43,32.88,357.57,82.96,53.61,27.29,1.14,12.86,1.43,4.43,67.29,62.42,36.00,37.70,4.25,9.78
81,Sassuolo,Serie A,2.29,1.51,5.86,41.00,338.14,84.42,46.13,24.57,2.86,20.43,2.00,4.00,58.71,56.20,29.71,43.27,3.80,15.88
82,Sevilla,La Liga,1.63,1.30,5.00,37.04,317.13,79.80,50.89,33.88,1.50,19.38,1.38,3.50,71.50,62.94,40.63,46.15,3.57,8.32
83,Sheffield United,Premier League,0.71,0.86,2.71,33.93,301.71,80.92,40.41,22.00,2.29,13.86,2.43,7.57,75.43,58.33,40.29,41.49,3.60,15.69
84,Strasbourg,Ligue 1,1.17,1.22,2.50,34.88,309.50,84.18,43.72,20.83,1.33,10.50,1.33,3.83,73.17,64.46,33.50,46.77,3.71,13.24
85,Stuttgart,Bundesliga,3.50,2.02,8.00,49.48,473.50,87.33,55.26,33.67,2.00,26.17,1.17,4.17,49.00,63.61,35.83,49.30,5.54,12.34
86,Torino,Serie A,1.14,1.31,4.14,34.94,403.14,86.70,51.80,30.71,0.57,16.14,1.14,3.00,58.86,59.71,34.43,40.66,5.02,11.21
87,Tottenham Hotspur,Premier League,2.29,2.10,5.86,35.34,477.00,87.39,59.14,31.57,2.29,31.71,1.14,4.71,61.43,56.05,26.71,36.90,5.00,7.60
88,Toulouse,Ligue 1,1.00,0.82,2.86,37.04,323.29,81.93,43.92,19.43,2.57,11.86,1.29,4.57,70.14,60.69,28.14,49.75,3.93,14.50
89,Udinese,Serie A,0.71,1.53,5.14,36.73,300.14,83.57,47.41,30.29,1.43,18.00,1.57,3.71,67.29,60.08,31.14,52.29,3.79,10.08
90,Union Berlin,Bundesliga,1.86,1.50,4.43,37.80,293.43,80.90,43.16,27.14,1.86,17.00,1.43,5.14,60.14,63.18,48.00,47.02,3.48,14.49
91,Valencia,La Liga,1.29,1.15,4.29,44.12,306.43,81.34,46.54,24.57,1.57,11.86,1.00,3.29,71.14,64.46,37.86,41.89,3.61,11.13
92,Villarreal,La Liga,1.25,1.22,3.75,37.04,405.75,87.59,55.80,25.75,1.38,19.50,1.88,5.00,64.75,60.81,31.00,50.00,4.73,9.22
93,Werder Bremen,Bundeslga,1.67,2.05,3.83,34.33,302.17,80.22,44.61,21.67,3.00,15.67,2.17,6.33,75.00,60.22,49.33,46.96,3.61,11.84
94,West Ham United,Premier League,1.88,1.62,4.75,40.00,338.00,83.66,43.50,22.75,2.25,20.00,1.38,6.50,65.88,60.34,34.75,43.53,3.96,17.39
95,Wolfsburg,Bundesliga,2.17,1.80,5.83,50.00,370.67,82.62,49.98,28.83,2.00,17.67,1.00,2.83,62.67,60.11,33.33,50.00,4.31,12.28
96,Wolverhampton Wanderers,Premier League,1.63,1.54,4.38,37.23,408.25,85.16,51.42,25.50,2.38,21.50,1.88,5.88,65.13,59.31,34.13,47.25,4.56,11.35`;



var rows = csvData.trim().split('\n');
var header = rows[0].split(',');
var data = rows.slice(1).map(function(row) {
  return row.split(',').map(function(d, i) {
    if (i >= 3) { // Assuming columns 2 and onwards contain numeric values
      return parseFloat(d);
    } else {
      return d;
    }
  });
});

  var margin = { top: 40, right: 80, bottom: 100, left: 100 };
  var width = 1080 - margin.left - margin.right;
  var height = 720 - margin.top - margin.bottom;

var medianLinesVisible = false;


var container = d3.select("body")
  .append("div")
  .style("position", "relative");

var selectX = container.append("select")
  .attr("id", "select-x")
  .on("change", updateChart)
  .style("position", "absolute")
  .style("left", "80px")
  .style("top", "0px");

var selectY = container.append("select")
  .attr("id", "select-y")
  .on("change", updateChart)
  .style("position", "absolute")
  .style("left", "330px")
  .style("top", "0px");


var xMedian = d3.median(data, function(d) { return d[header.indexOf(xMetric)]; });
var yMedian = d3.median(data, function(d) { return d[header.indexOf(yMetric)]; });


var names = data.map(function(row) {
  return row[1];
});


  header.slice(3).forEach(function(metric) {
    selectX.append("option")
      .text(metric)
      .attr("value", metric);
    selectY.append("option")
      .text(metric)
      .attr("value", metric);
  });

  var svg = d3.select("#scatter-plot")
    .attr("width", width + margin.left + margin.right)
    .attr("height", height + margin.top + margin.bottom)
    .append("g")
    .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

  var xMetric = header[3];
  var yMetric = header[3];

  var xScale = d3.scaleLinear()
    .domain([0, d3.max(data, function(d) { return d[3]; })])
    .range([0, width]);
  var yScale = d3.scaleLinear()
    .domain([0, d3.max(data, function(d) { return d[3]; })])
    .range([height, 0]);

var xAxis = d3.axisBottom(xScale)
  .tickSize(0); 
var yAxis = d3.axisLeft(yScale)
  .tickSize(0); 

var xExtent = d3.extent(data, function(d) { return d[header.indexOf(xMetric)]; });
var yExtent = d3.extent(data, function(d) { return d[header.indexOf(yMetric)]; });

svg.append("g")
  .attr("transform", "translate(0," + height + ")")
  .call(xAxis)
  .selectAll("text")
  .remove();

svg.append("g")
  .call(yAxis)
  .selectAll("text")
  .remove();

svg.append("text")
  .attr("class", "x-label")
  .attr("text-anchor", "end")
  .attr("x", width)
  .attr("y", height + margin.top)
  .text(header[3])
  .style("font-family", "Arial")
  .style("font-size", "12px");


svg.append("text")
  .attr("class", "y-label")
  .attr("text-anchor", "end")
  .attr("transform", "rotate(-90)")
  .attr("y", -35)
  .attr("x", 0)
  .text(header[3])
  .style("font-family", "Arial")
  .style("font-size", "12px");


svg.append("g")
  .attr("class", "x-axis")
  .attr("transform", "translate(0," + height + ")")
  .call(d3.axisBottom(xScale).tickSize(0));

svg.append("g")
  .attr("class", "y-axis")
  .call(d3.axisLeft(yScale).tickSize(0));


var tooltip = d3.select("body")
  .append("div")
  .attr("class", "tooltip")
  .style("opacity", 0);

tooltip.style("position", "absolute")
  .style("background-color", "#f9f9f9")
  .style("border", "solid")
  .style("border-width", "1px")
  .style("border-radius", "5px")
  .style("padding", "10px")
  .style("font-size", "12px");
	
	document.addEventListener('touchstart', function(event) {
  if (!tooltip.contains(event.target)) {
    tooltip.style.display = 'none';
  }
});

var names = rows.slice(1).map(function(row) {
  return row.split(',')[1];
});


var searchBar = document.getElementById("search-bar");

searchBar.addEventListener("input", function() {
  var searchTerm = searchBar.value.toLowerCase();

  if (searchTerm === '') {
    resetSearch();
    return;
  }

  searchTerm = removeSpecialCharsAndDiacritics(searchTerm);

  circles.classed("highlighted", false);

  circles.filter(function(d, i) {
      var name = removeSpecialCharsAndDiacritics(names[i].toLowerCase());
      return name.includes(searchTerm);
    })
    .classed("highlighted", true);
});

function removeSpecialCharsAndDiacritics(str) {
  return str.normalize("NFD").replace(/[\u0300-\u036f]/g, "").replace(/[^\w\s]/gi, "");
}






var clickedCircles = []; // array to keep track of clicked circles
var filteredData; // declare filteredData in a higher scope
var filteredNames; // declare filteredNames in a higher scope


var circles = svg.selectAll("circle")
  .data(data)
  .enter()
  .append("circle")
  .attr("cx", function(d) { return xScale(d[header.indexOf(xMetric)]); })
  .attr("cy", function(d) { return yScale(d[header.indexOf(yMetric)]); })
  .attr("r", 8)
  .style("fill", "steelblue")
  .on("mouseover", function(d, i) {
    d3.select(this)
      .classed("hovered", true)
      .style("fill", "red");
      
    tooltip.transition()
      .duration(200)
      .style("opacity", .9);
    tooltip.html(names[i] + "<br/>" + xMetric + ": " + d[header.indexOf(xMetric)] + "<br/>" + yMetric + ": " + d[header.indexOf(yMetric)])
      .style("left", (d3.event.pageX + 10) + "px")
      .style("top", (d3.event.pageY - 28) + "px");
  })
  .on("mouseout", function(d) {
    if (!d3.select(this).classed("clicked")) {
      d3.select(this)
        .classed("hovered", false)
        .style("fill", "steelblue");
    }
    
    tooltip.transition()
      .duration(500)
      .style("opacity", 0);
  })
  .on("click", function(d, i) {
    var clickedIndex = clickedCircles.indexOf(i);
    if (clickedIndex === -1) {
      // circle is not already clicked
      clickedCircles.push(i); // add to clickedCircles array
      d3.select(this)
        .classed("clicked", true) // apply the "clicked" class
        .classed("hovered", false)
        .style("fill", "red");
svg.append("text")
   .attr("x", xScale(d[header.indexOf(xMetric)]) - 20)
   .attr("y", yScale(d[header.indexOf(yMetric)]) + 20)
   .text(names[i])
   .classed("player-name", true)
   .style("font-family", "Arial")
   .style("font-size", "12px");

   
    }
  });



// X-axis median line
var xMedianLine = svg.append("line")
  .attr("class", "x-median")
  .attr("x1", xScale(xMedian))
  .attr("y1", 0)
  .attr("x2", xScale(xMedian))
  .attr("y2", height)
  .style("stroke", "red")
  .style("stroke-dasharray", "4")
  .style("display", medianLinesVisible ? "block" : "none");

// Y-axis median line
var yMedianLine = svg.append("line")
  .attr("class", "y-median")
  .attr("x1", 0)
  .attr("y1", yScale(yMedian))
  .attr("x2", width)
  .attr("y2", yScale(yMedian))
  .style("stroke", "red")
  .style("stroke-dasharray", "4")
  .style("display", medianLinesVisible ? "block" : "none");


  updateChart();

function updateChart() {
  xMetric = selectX.property("value");
  yMetric = selectY.property("value");
  var selectedLeague = document.getElementById("select-league").value;

  // Filter data based on the selected league

  if (selectedLeague !== "all") {
    filteredData = data.filter(function(d) {
      return d[header.indexOf('Top 7 Leagues')] === selectedLeague;
    });
    filteredNames = names.filter(function(name, i) {
      return data[i][header.indexOf('Top 7 Leagues')] === selectedLeague;
    });
  } else {
    filteredData = data;
    filteredNames = names;
  }

  // Update scales with filtered data
  xScale.domain(d3.extent(filteredData, function(d) { return d[header.indexOf(xMetric)]; })).nice();
  yScale.domain(d3.extent(filteredData, function(d) { return d[header.indexOf(yMetric)]; })).nice();

  // Remove existing median lines
  svg.selectAll(".median-line").remove();

  // Create new median lines
  if (medianLinesVisible) {
    // Calculate the new medians based on the selected metrics
    var xMedian = d3.median(filteredData, function(d) { return d[header.indexOf(xMetric)]; });
    var yMedian = d3.median(filteredData, function(d) { return d[header.indexOf(yMetric)]; });

    // X-axis median line
    svg.append("line")
      .attr("class", "median-line")
      .attr("x1", xScale(xMedian))
      .attr("y1", 0)
      .attr("x2", xScale(xMedian))
      .attr("y2", height)
      .style("stroke", "red")
      .style("stroke-dasharray", "4");

    // Y-axis median line
    svg.append("line")
      .attr("class", "median-line")
      .attr("x1", 0)
      .attr("y1", yScale(yMedian))
      .attr("x2", width)
      .attr("y2", yScale(yMedian))
      .style("stroke", "red")
      .style("stroke-dasharray", "4");
  }

  svg.select(".x-label")
    .text(xMetric);

  svg.select(".y-label")
    .text(yMetric);

   var circles = svg.selectAll("circle")
    .data(filteredData, function(d) {
      return d[0]; // Use unique identifier as the data key
    });

  circles.exit().remove();

  circles.enter()
    .append("circle")
    .merge(circles)
    .attr("cx", function (d) {
      return xScale(d[header.indexOf(xMetric)]);
    })
    .attr("cy", function (d) {
      return yScale(d[header.indexOf(yMetric)]);
    })
    .attr("r", 8)
    .style("fill", function (d) {
      return clickedCircles.includes(d[0]) ? "red" : "steelblue";
    })
    .classed("highlighted", false)
    .classed("clicked", function (d) {
      return clickedCircles.includes(d[0]);
    })
    .on("click", circleClick)
    .on("mouseover", function (d) {
      d3.select(this)
        .classed("hovered", true)
        .style("fill", "red");

      tooltip.transition()
        .duration(200)
        .style("opacity", 0.9);

      tooltip.html(filteredNames[filteredData.indexOf(d)] + "<br/>" + xMetric + ": " + d[header.indexOf(xMetric)] + "<br/>" + yMetric + ": " + d[header.indexOf(yMetric)])
        .style("left", (d3.event.pageX + 10) + "px")
        .style("top", (d3.event.pageY - 28) + "px");
    })
    .on("mouseout", function (d) {
      var circle = d3.select(this);
      var index = clickedCircles.indexOf(d[0]);

      if (!circle.classed("clicked")) {
        circle
          .classed("hovered", false)
          .style("fill", "steelblue");
      }

      tooltip.transition()
        .duration(500)
        .style("opacity", 0);
    });

  svg.selectAll(".player-name").remove(); // Remove existing player names

  // Display player names for clicked circles
  var clickedCirclesData = filteredData.filter(function(d) {
    return clickedCircles.includes(d[0]);
  });

  var playerNames = svg.selectAll(".player-name")
    .data(clickedCirclesData, function(d) {
      return d[0]; // Use unique identifier as the data key
    });

  playerNames.exit().remove();

  playerNames.enter()
    .append("text")
    .attr("class", "player-name")
    .merge(playerNames)
    .attr("x", function(d) {
      return xScale(d[header.indexOf(xMetric)]) - 20;
    })
    .attr("y", function(d) {
      return yScale(d[header.indexOf(yMetric)]) + 20;
    })
    .style("font-family", "Arial")
    .style("font-size", "12px")
    .text(function(d) {
      return filteredNames[filteredData.indexOf(d)];
    });

  svg.select(".x-axis")
    .transition()
    .duration(1000)
    .call(d3.axisBottom(xScale).tickSize(0));

  svg.select(".y-axis")
    .transition()
    .duration(1000)
    .call(d3.axisLeft(yScale).tickSize(0));
}

function circleClick(d, i) {
  var circle = d3.select(this);
  var identifier = d[0]; // Unique identifier of the data point

  var index = clickedCircles.indexOf(identifier);

  if (index > -1) {
    circle
      .classed("clicked", false)
      .style("fill", "steelblue");

    clickedCircles.splice(index, 1);

    // Remove the player name text element
    svg.select(".player-name-" + identifier).remove();
  } else {
    circle
      .classed("clicked", true)
      .style("fill", "red");

    clickedCircles.push(identifier);

    // Append the player name text element
    svg.append("text")
      .attr("class", "player-name player-name-" + identifier)
      .attr("x", xScale(d[header.indexOf(xMetric)]) - 20)
      .attr("y", yScale(d[header.indexOf(yMetric)]) + 20)
      .style("font-family", "Arial")
      .style("font-size", "12px")
      .text(filteredNames[filteredData.indexOf(d)]);
  }

  updateClickedPlayerName(xMetric, yMetric);

  circles.on("click", function(d, i) {
    var clickedCircle = d3.select(this);
    var circleName = filteredNames[i];

    // Check if the circle is already clicked
    var isClicked = clickedCircles.includes(circleName);

    if (isClicked) {
      // Remove the circle from clickedCircles and reset its style
      clickedCircles = clickedCircles.filter(function(name) {
        return name !== circleName;
      });
      clickedCircle
        .style("fill", "steelblue")
        .classed("clicked", false);
    } else {
      // Add the circle to clickedCircles and update its style
      clickedCircles.push(circleName);
      clickedCircle
        .style("fill", "red")
        .classed("clicked", true);
    }

    // Update the chart based on the clicked circles
    updateChart();
  });

  // Restore the style for previously clicked circles
  circles.each(function(d, i) {
    var circleName = filteredNames[i];
    var clicked = clickedCircles.includes(circleName);
    d3.select(this).classed("clicked", clicked);
  });


}


function updateClickedPlayerName() {
  svg.selectAll(".player-name")
    .attr("x", function(d) {
      return xScale(d[header.indexOf(xMetric)]) - 20;
    })
    .attr("y", function(d) {
      return yScale(d[header.indexOf(yMetric)]) + 20;
    })
    .text(function(d) {
      return clickedCircles.includes(d[0]) ? filteredNames[filteredData.indexOf(d)] : "";
    });
}



function resetSearch() {
  searchBar.value = '';
  circles.classed("highlighted", false);
}



function resetMedianLines() {
  svg.selectAll(".median-line").remove();
}


var toggleButton = document.getElementById("toggle-median-lines");
toggleButton.addEventListener("click", function() {
  medianLinesVisible = !medianLinesVisible; // toggle the visibility state

  if (medianLinesVisible) {
    updateChart();
  } else {
    svg.selectAll(".median-line").remove(); // Remove existing median lines
  }
});


</script>

<script>

    // Function to toggle dark mode
    function toggleDarkMode() {
      const body = document.querySelector("body");
      body.classList.toggle("dark-mode");

      // Store the user's preference in local storage
      const isDarkMode = body.classList.contains("dark-mode");
      localStorage.setItem("darkMode", isDarkMode);
    }

    // Check if user has a stored preference for dark mode
    const storedDarkMode = localStorage.getItem("darkMode");

    if (storedDarkMode === "true") {
      const body = document.querySelector("body");
      body.classList.add("dark-mode");
    }

  </script>
		
 <table id="table">
   
</table>
		
<br><br><br>
		
<br><br><br>
		


</body>
</html>
